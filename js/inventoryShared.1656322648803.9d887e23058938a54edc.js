(self.webpackChunkinsights_inventory_frontend=self.webpackChunkinsights_inventory_frontend||[]).push([[5849,1931],{39903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var a=n(92950),o=n.n(a),i=n(45697),l=n.n(i),r=n(66435),s=n(80236),c=n(79851),u=n(34512),d=n(49739),f=n(83826),p=n(48140),y=n(86050),v=n(47173),g=n(19694),m=function(e){var t,n=e.handleModalToggle,a=e.isModalOpen,i=e.currentSytems,l=e.onConfirm,m="system";return Array.isArray(i)?(t=1===i.length?i[0].display_name:"".concat(i.length," systems"),m=1===i.length?m:"systems"):t=i.display_name,o().createElement(s.u,{variant:"small",title:"Remove from inventory",className:"ins-c-inventory__table--remove",ouiaId:"inventory-delete-modal",isOpen:a,onClose:function(){return n(!1)},appendTo:document.getElementsByClassName("inventory")[0]||document.body},o().createElement(c.P,{hasGutter:!0},o().createElement(u.J,null,o().createElement(g.ZP,{size:"xl",className:"ins-m-alert"})),o().createElement(u.J,{isFilled:!0},o().createElement(d.K,{hasGutter:!0},o().createElement(f.v,null,t," will be removed from all ",location.host," applications and services. You need to re-register the ",m," to add it back to your inventory."),o().createElement(f.v,null,"To disable the daily upload for this ",m,", use the following command:"),o().createElement(f.v,null,o().createElement(r.M5,null,"insights-client --unregister"))))),o().createElement(p.a,{hasGutter:!0},o().createElement(y.Z,null,o().createElement(v.zx,{variant:"danger",ouiaId:"confirm-inventory-delete",onClick:l},"Remove"),o().createElement(v.zx,{variant:"link",ouiaId:"cancel-inventory-delete",onClick:function(){return n(!1)}},"Cancel"))))},h=l().shape({id:l().string,displayName:l().string});m.propTypes={isModalOpen:l().bool,currentSytems:l().oneOfType([h,l().arrayOf(h)]),handleModalToggle:l().func,onConfirm:l().func},m.defaultProps={isModalOpen:!1,currentSytems:{},handleModalToggle:function(){},onConfirm:function(){}};const T=m},68595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(92950),o=n.n(a),i=n(45697),l=n.n(i),r=n(32384),s=n(19281),c=n(94778),u=function(e){var t=e.count,n=e.loadTags,a=e.systemId;return o().createElement("span",{onClick:function(e){return e.stopPropagation()},className:"ins-c-inventory__list-tags","data-ouia-component-id":"".concat(a,"-tag-button")},o().createElement(s.Z,{count:t,onTagClick:function(){return n(a,t)}}))};u.propTypes={count:l().number,loadTags:l().func,systemId:l().string};const d=(0,r.connect)((function(){return{}}),(function(e){return{loadTags:function(t,n){t&&(e((0,c.Ar)(!0)),e((0,c.me)(t,void 0,void 0,n)))}}}))(u)},454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(87462),o=n(45987),i=n(92950),l=n.n(i),r=n(45697),s=n.n(r),c=n(43707),u=n(2372),d=["cmp","hideLoader","isRbacEnabled","inventoryRef","store"],f=function(e){var t=e.cmp,n=e.hideLoader,i=e.isRbacEnabled,r=e.inventoryRef,s=e.store,f=(0,o.Z)(e,d),p=(0,c.T)("inventory",["inventory:*:*","inventory:*:read","inventory:hosts:read"],!0),y=p.hasAccess;return p.isLoading&&!n?l().createElement(u.$,null):l().createElement(t,(0,a.Z)({},f,r&&{ref:r},{hasAccess:!i||y,store:s}))};f.propTypes={cmp:s().any,inventoryRef:s().any,store:s().object,customRender:s().bool,isRbacEnabled:s().bool,hideLoader:s().bool};const p=f},73880:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DeleteModal:()=>_.Z,InventoryContext:()=>C.FW,OS_CHIP:()=>C.vi,REGISTERED_CHIP:()=>C.p9,RenderWrapper:()=>P.Z,STALE_CHIP:()=>C.yc,TAG_CHIP:()=>C.m5,TEXTUAL_CHIP:()=>C.UC,TEXT_FILTER:()=>C.ud,TagWithDialog:()=>a.Z,TagsModal:()=>O,arrayToSelection:()=>C.Nu,defaultFilters:()=>C.js,filterToGroup:()=>C.Tk,generateFilter:()=>C.h3,isEmpty:()=>C.xb,loadSystems:()=>C.K$,operatingSystems:()=>C.wQ,reduceFilters:()=>C.YQ,registered:()=>C.Gw,reloadWrapper:()=>C.KS,staleness:()=>C.jv});var a=n(68595),o=n(87462),i=n(4942),l=n(93433),r=n(29439),s=n(92950),c=n.n(s),u=n(32384),d=n(45697),f=n.n(d),p=n(94778),y=n(98944),v=n(57971),g=n(23279),m=n.n(g),h=n(85564),T=n.n(h);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.customFilters,n=e.filterTagsBy,a=e.onToggleModal,i=e.onApply,d=e.getTags,f=(0,u.useDispatch)(),g=(0,s.useState)(""),h=(0,r.Z)(g,2),b=h[0],S=h[1],O=(0,s.useState)([]),P=(0,r.Z)(O,2),_=P[0],C=P[1],D=(0,s.useState)({perPage:10,page:1}),I=(0,r.Z)(D,2),A=I[0],j=I[1],w=(0,u.useSelector)((function(e){var t,n=e.entities,a=e.entityDetails;return null===(t=n||a)||void 0===t?void 0:t.showTagDialog})),Z=(0,u.useSelector)((function(e){var t=e.entities,n=e.entityDetails;return null!=t&&t.activeSystemTag||null!=n&&n.entity?A:(null==t?void 0:t.allTagsPagination)||A}),u.shallowEqual),k=(0,u.useSelector)((function(e){var t=e.entities,n=e.entityDetails;return(null==t?void 0:t.tagModalLoaded)||(null==n?void 0:n.tagModalLoaded)})),M=(0,u.useSelector)((function(e){var t=e.entities,n=e.entityDetails;return(null==t?void 0:t.activeSystemTag)||(null==n?void 0:n.entity)})),L=(0,u.useSelector)((function(e){var t,n,a,o=e.entities,i=e.entityDetails,r=(null==o||null===(t=o.activeSystemTag)||void 0===t?void 0:t.tags)||(null==i||null===(n=i.entity)||void 0===n?void 0:n.tags);return r?null==r?void 0:r.filter((function(e){return Object.values(e).some((function(e){return null==e?void 0:e.includes(b)}))})).slice((null==A?void 0:A.perPage)*((null==A?void 0:A.page)-1),(null==A?void 0:A.perPage)*(null==A?void 0:A.page)):null==o||null===(a=o.allTags)||void 0===a?void 0:a.reduce((function(e,t){var n=t.tags;return[].concat((0,l.Z)(e),(0,l.Z)(T()(n.map((function(e){return e.tag})))))}),[])})),R=(0,u.useSelector)((function(e){var t,n=e.entities,a=e.entityDetails;return null===(t=n||a)||void 0===t?void 0:t.activeFilters})),F=(0,u.useSelector)((function(e){var t,n,a,o=e.entities,i=e.entityDetails,l=null===(t=(null==o||null===(n=o.activeSystemTag)||void 0===n?void 0:n.tags)||(null==i||null===(a=i.entity)||void 0===a?void 0:a.tags))||void 0===t?void 0:t.filter((function(e){return Object.values(e).some((function(e){return null==e?void 0:e.includes(b)}))}));return l?l.length:null==o?void 0:o.allTagsTotal}));(0,s.useEffect)((function(){S(n)}),[n]);var H=function(e,n){M?j((function(){return e})):f((0,p.C8)(n,E(E({},t),{},{pagination:e,filters:R}),d))},N=(0,s.useCallback)(m()(H,800),[M]);return c().createElement(y.Z,(0,o.Z)({className:"ins-c-inventory__tags-modal",tableProps:{canSelectAll:!1}},k&&{loaded:k,pagination:E(E({},Z),{},{count:F}),rows:(null==L?void 0:L.map((function(e){var t=e.key,n=e.value,a=e.namespace;return{id:"".concat(a,"/").concat(t,"=").concat(n),selected:_.find((function(e){return e.id==="".concat(a,"/").concat(t,"=").concat(n)})),cells:[t,n,a]}})))||[]},{loaded:k,width:"auto",isOpen:w,toggleModal:function(){C([]),S(""),a(),f((0,p.Ar)(!1))},filters:[{label:"Tags filter",placeholder:"Filter tags",value:"tags-filter",filterValues:{value:b,onChange:function(e,t){N(Z,t),S(t)}}}],onUpdateData:function(e){return H(e,b)},columns:[{title:"Name"},{title:"Value",transforms:[(0,v.cellWidth)(30)]},{title:"Tag source",transforms:[(0,v.cellWidth)(30)]}]},!M&&{onSelect:function(e){return C(e)},selected:_,onApply:function(){return i&&i(_)}},{bulkSelect:{id:"bulk-select-tags"},title:M?"".concat(M.display_name," (").concat(F,")"):"All tags in inventory (".concat(F,")")}))};S.propTypes={onApply:f().func,onToggleModal:f().func,filterTagsBy:f().string,customFilters:f().shape({tags:f().oneOfType([f().object,f().arrayOf(f().string)])}),getTags:f().func},S.defaultProps={filterTagsBy:"",onToggleModal:function(){}};const O=S;var P=n(454),_=n(39903),C=n(13784)},94778:(e,t,n)=>{"use strict";n.d(t,{gb:()=>i.gb,Oj:()=>i.Oj,k0:()=>i.k0,Fo:()=>i.Fo,K5:()=>l.K5,u3:()=>l.u3,Xe:()=>l.Xe,nE:()=>l.nE,C8:()=>l.C8,CP:()=>l.CP,fg:()=>l.fg,il:()=>l.il,A_:()=>l.A_,me:()=>l.me,CL:()=>l.CL,HD:()=>l.HD,wb:()=>l.wb,Ar:()=>l.Ar,jB:()=>l.jB,Ks:()=>r,Tv:()=>s,L1:()=>c,$Y:()=>u,Jr:()=>d,eR:()=>f,Uw:()=>p});var a=n(59086),o=n(63599),i=n(87637),l=n(8622),r=function(e,t){return{type:a.aI.REMOVE_ENTITY,payload:o.hosts.apiHostDeleteById(e),meta:{notifications:{fulfilled:{variant:"success",title:"Delete operation finished",description:"".concat(t," has been successfully removed."),dismissable:!0}},systems:e}}},s=function(e){return{type:a.uW,payload:{filtersList:e}}},c=function(){return{type:a.wt}},u=function(e,t){return{type:a.aI.UPDATE_DISPLAY_NAME,payload:o.hosts.apiHostPatchById([e],{display_name:t}),meta:{id:e,value:t,notifications:{fulfilled:{variant:"success",title:"Display name for entity with ID ".concat(e," has been changed to ").concat(t),dismissable:!0}}}}},d=function(e,t){return{type:a.fT,payload:{page:e,perPage:t}}},f=function(e){return{type:a.aI.LOAD_SYSTEM_PROFILE,payload:(0,o.getEntitySystemProfile)(e,{})}},p=function(e,t){return{type:a.aI.SET_ANSIBLE_HOST,payload:o.hosts.apiHostPatchById([e],{ansible_host:t}),meta:{notifications:{fulfilled:{variant:"success",title:"Ansible hostname has been updated",dismissable:!0}}}}}},45467:()=>{},70347:()=>{},34946:()=>{},37625:()=>{},90479:()=>{},25238:()=>{},49854:()=>{},74181:()=>{},16166:()=>{},53519:()=>{},11177:()=>{}}]);
//# sourceMappingURL=../sourcemaps/inventoryShared.e49b145afccd52056fd898d8187e8063.js.map