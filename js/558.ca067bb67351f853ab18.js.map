{"version":3,"sources":["webpack://insights-inventory-frontend/./src/Utilities/constants.js","webpack://insights-inventory-frontend/./src/components/DeleteModal.js","webpack://insights-inventory-frontend/./src/routes/InventoryTable.js"],"names":["defaultFilters","staleFilter","registeredWithFilter","isEmpty","check","length","generateFilter","status","source","tagsFilter","filterbyName","Array","isArray","tagFilters","value","filter","Boolean","DeleteModal","systemToRemove","handleModalToggle","isModalOpen","currentSytem","onConfirm","systemLabel","display_name","displayName","variant","title","className","isOpen","onClose","hasGutter","size","isFilled","location","host","onClick","ouiaId","ActiveSystemProp","PropTypes","id","propTypes","defaultProps","calculateChecked","rows","selected","every","has","some","mapTags","category","values","map","tagKey","filterMapper","searchParams","forEach","item","append","flatMap","calculatePagination","page","perPage","currSearch","URLSearchParams","search","newPage","undefined","get","newPerPage","isNaN","parseInt","Inventory","clearNotifications","deleteEntity","addNotification","loaded","updateDisplayName","onSelectRows","setFilter","history","setPagination","document","inventory","useRef","useState","activateSystem","filters","onSetfilters","ediOpen","onEditOpen","globalFilter","setGlobalFilter","useSelector","permissionsReducer","loading","writePermissions","shallowEqual","onRefresh","options","callback","reduce","acc","curr","Object","keys","key","calculateFilters","per_page","toString","push","hash","current","onRefreshData","useEffect","insights","chrome","hideGlobalFilter","appAction","appObjectId","on","data","mapGlobalFilter","workloads","SID","tags","system_profile","SAP","isSelected","sap_system","sap_sids","calculateSelected","gutter","span","customFilters","isFullView","ref","showTags","hasCheckbox","actions","_event","_index","systemId","actionsConfig","label","props","isDisabled","from","bulkSelect","count","items","checked","onSelect","tableProps","canSelectAll","onRowClick","_e","app","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","getRegistry","register","entitiesReducer","removeSystems","description","dismissable","onCancel","onSubmit","contextTypes","store","loadEntity","routerParams","connect","entities","dispatch","reloadWrapper","event","payload","then","hostName","filtersList"],"mappings":"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","file":"js/558.ca067bb67351f853ab18.js","sourcesContent":["export const defaultFilters = [\n    {\n        staleFilter: ['fresh', 'stale']\n    }, {\n        registeredWithFilter: ['insights']\n    }\n];\n\nexport const isEmpty = (check) => !check || check?.length === 0;\n\nexport const generateFilter = (status, source, tagsFilter, filterbyName) => ([\n    !isEmpty(status) && {\n        staleFilter: Array.isArray(status) ? status : [status]\n    },\n    !isEmpty(tagsFilter) && {\n        tagFilters: Array.isArray(tagsFilter) ? tagsFilter : [tagsFilter]\n    },\n    !isEmpty(source) && {\n        registeredWithFilter: Array.isArray(source) ? source : [source]\n    },\n    !isEmpty(filterbyName) && {\n        value: 'hostname_or_id',\n        filter: Array.isArray(filterbyName) ? filterbyName[0] : filterbyName\n    },\n    (!isEmpty(status) || !isEmpty(tagsFilter) || !isEmpty(filterbyName)) && isEmpty(source) && {\n        registeredWithFilter: []\n    },\n    (!isEmpty(source) || !isEmpty(tagsFilter) || !isEmpty(filterbyName)) && isEmpty(status) && {\n        staleFilter: []\n    }\n].filter(Boolean));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n    Modal,\n    Split,\n    SplitItem,\n    Stack,\n    StackItem,\n    Level,\n    LevelItem,\n    Button,\n    ClipboardCopy\n} from '@patternfly/react-core';\nimport { ExclamationTriangleIcon } from  '@patternfly/react-icons';\n\nconst DeleteModal = ({ handleModalToggle, isModalOpen, currentSytem, onConfirm }) => {\n    let systemToRemove;\n    let systemLabel = 'system';\n    if (Array.isArray(currentSytem)) {\n        systemToRemove = currentSytem.length === 1 ? currentSytem[0].display_name : `${currentSytem.length} systems`;\n        systemLabel = currentSytem.length === 1 ? systemLabel : 'systems';\n    } else {\n        systemToRemove = currentSytem.displayName;\n    }\n\n    return <Modal\n        variant=\"small\"\n        title=\"Remove from inventory\"\n        className=\"ins-c-inventory__table--remove\"\n        isOpen={isModalOpen}\n        onClose={() => handleModalToggle(false)}\n    >\n        <Split hasGutter>\n            <SplitItem><ExclamationTriangleIcon size=\"xl\" className=\"ins-m-alert\" /></SplitItem>\n            <SplitItem isFilled>\n                <Stack hasGutter>\n                    <StackItem>\n                        {systemToRemove} will be removed from\n                                    all {location.host} applications and services. You need to re-register\n                        the {systemLabel} to add it back to your inventory.\n                    </StackItem>\n                    <StackItem>\n                        To disable the daily upload for this {systemLabel}, use the following command:\n                    </StackItem>\n                    <StackItem>\n                        <ClipboardCopy>insights-client --unregister</ClipboardCopy>\n                    </StackItem>\n                </Stack>\n            </SplitItem>\n        </Split>\n        <Level hasGutter>\n            <LevelItem>\n                <Button variant=\"danger\" onClick={onConfirm} ouiaId=\"confirm-delete\">\n                    Remove\n                </Button>\n                <Button variant=\"link\" onClick={() => handleModalToggle(false)}>Cancel</Button>\n            </LevelItem>\n        </Level>\n    </Modal>;\n};\n\nconst ActiveSystemProp = PropTypes.shape({\n    id: PropTypes.string,\n    displayName: PropTypes.string\n});\n\nDeleteModal.propTypes = {\n    isModalOpen: PropTypes.bool,\n    currentSytem: PropTypes.oneOfType([ActiveSystemProp, PropTypes.arrayOf(ActiveSystemProp)]),\n    handleModalToggle: PropTypes.func,\n    onConfirm: PropTypes.func\n};\n\nDeleteModal.defaultProps = {\n    isModalOpen: false,\n    currentSytem: {},\n    handleModalToggle: () => undefined,\n    onConfirm: () => undefined\n};\n\nexport default DeleteModal;\n","/* eslint-disable camelcase */\nimport React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, shallowEqual, useSelector } from 'react-redux';\nimport './inventory.scss';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/esm/RouterParams';\nimport { PageHeader, PageHeaderTitle, Main } from '@redhat-cloud-services/frontend-components';\nimport { entitiesReducer } from '../store';\nimport * as actions from '../actions';\nimport { Grid, GridItem } from '@patternfly/react-core';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/esm/Registry';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/esm/actions';\nimport DeleteModal from '../components/DeleteModal';\nimport TextInputModal from '@redhat-cloud-services/frontend-components-inventory-general-info/esm/TextInputModal';\nimport flatMap from 'lodash/flatMap';\nimport { defaultFilters, generateFilter } from '../Utilities/constants';\n\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/components/esm/Inventory';\n\nconst calculateChecked = (rows = [], selected) => (\n    rows.every(({ id }) => selected && selected.has(id))\n        ? rows.length > 0\n        : rows.some(({ id }) => selected && selected.has(id)) && null\n);\n\nconst mapTags = ({ category, values }) => values.map(({ tagKey, value }) => `${\n    category ? `${category}/` : ''\n}${\n    tagKey\n}${\n    value ? `=${value}` : ''\n}`);\n\nconst filterMapper = {\n    staleFilter: ({ staleFilter }, searchParams) => staleFilter.forEach(item => searchParams.append('status', item)),\n    registeredWithFilter: ({ registeredWithFilter }, searchParams) => registeredWithFilter\n    ?.forEach(item => searchParams.append('source', item)),\n    value: ({ value, filter }, searchParams) => value === 'hostname_or_id' &&\n    Boolean(filter) &&\n    searchParams.append('hostname_or_id', filter),\n    tagFilters: ({ tagFilters }, searchParams) => tagFilters?.length > 0 && searchParams.append(\n        'tags',\n        flatMap(tagFilters, mapTags)\n    )\n};\n\nconst calculateFilters = (searchParams, filters = []) => {\n    filters.forEach((filter) => {\n        Object.keys(filter).forEach(key => {\n            filterMapper?.[key]?.(filter, searchParams);\n        });\n    });\n\n    return searchParams;\n};\n\nexport const calculatePagination = (searchParams, page, perPage) => {\n    const currSearch = new URLSearchParams(location.search);\n    const newPage = page !== undefined ? page : currSearch.get('page');\n    const newPerPage = perPage !== undefined ? perPage : currSearch.get('per_page');\n    !isNaN(parseInt(newPage)) && searchParams.append('page', newPage);\n    !isNaN(parseInt(newPerPage)) && searchParams.append('per_page', newPerPage);\n};\n\nconst Inventory = ({\n    clearNotifications,\n    deleteEntity,\n    addNotification,\n    loaded,\n    rows,\n    updateDisplayName,\n    onSelectRows,\n    selected,\n    status,\n    setFilter,\n    history,\n    source,\n    filterbyName,\n    tagsFilter,\n    page,\n    perPage,\n    setPagination\n}) => {\n    document.title = 'Inventory | Red Hat Insights';\n    const inventory = useRef(null);\n    const [isModalOpen, handleModalToggle] = useState(false);\n    const [currentSytem, activateSystem] = useState({});\n    const [filters, onSetfilters] = useState([]);\n    const [ediOpen, onEditOpen] = useState(false);\n    const [globalFilter, setGlobalFilter] = useState();\n    const { loading, writePermissions } = useSelector(\n        ({ permissionsReducer }) =>\n            ({ loading: permissionsReducer?.loading, writePermissions: permissionsReducer?.writePermissions }),\n        shallowEqual\n    );\n\n    const onRefresh = (options, callback) => {\n        if (!options?.filters) {\n            options.filters = defaultFilters;\n        }\n\n        const { status, source, tagsFilter, filterbyName } = options?.filters.reduce((acc, curr) => ({\n            ...acc,\n            ...curr?.staleFilter && { status: curr.staleFilter },\n            ...curr?.registeredWithFilter && { source: curr.registeredWithFilter },\n            ...curr?.tagFilters && { tagsFilter: curr.tagFilters },\n            ...curr?.value === 'hostname_or_id' && { filterbyName: curr.filter }\n        }), { status: undefined, source: undefined, tagsFilter: undefined, filterbyName: undefined });\n        options.filters = generateFilter(status, source, tagsFilter, filterbyName);\n\n        onSetfilters(options?.filters);\n        const searchParams = new URLSearchParams();\n        calculateFilters(searchParams, options?.filters);\n        // eslint-disable-next-line camelcase\n        calculatePagination(searchParams, options?.page, options?.per_page);\n        const search = searchParams.toString();\n        history.push({\n            search,\n            hash: location.hash\n        });\n\n        if (!callback && inventory && inventory.current) {\n            inventory.current.onRefreshData(options);\n        } else if (callback) {\n            callback(options);\n        }\n    };\n\n    useEffect(() => {\n        insights.chrome?.hideGlobalFilter?.(false);\n        insights.chrome.appAction('system-list');\n        insights.chrome.appObjectId();\n        insights.chrome.on('GLOBAL_FILTER_UPDATE', ({ data }) => {\n            const [workloads, SID, tags] = insights.chrome?.mapGlobalFilter?.(data, false, true);\n            setGlobalFilter({\n                tags,\n                filter: {\n                    ...globalFilter?.filter,\n                    system_profile: {\n                        ...globalFilter?.filter?.system_profile,\n                        ...workloads?.SAP?.isSelected && { sap_system: true },\n                        ...SID?.length > 0 && { sap_sids: SID }\n                    }\n                }\n            });\n            if (inventory.current) {\n                inventory.current.onRefreshData({});\n            }\n        });\n        clearNotifications();\n    }, []);\n\n    const calculateSelected = () => selected ? selected.size : 0;\n\n    return (\n        <React.Fragment>\n            <PageHeader className=\"pf-m-light\">\n                <PageHeaderTitle title='Inventory'/>\n            </PageHeader>\n            <Main>\n                <Grid gutter=\"md\">\n                    <GridItem span={12}>\n                        {\n                            !loading && <InventoryTable\n                                customFilters={globalFilter}\n                                isFullView\n                                ref={inventory}\n                                showTags\n                                onRefresh={onRefresh}\n                                hasCheckbox={writePermissions}\n                                {...(writePermissions && {\n                                    actions: [\n                                        {\n                                            title: 'Delete',\n                                            onClick: (_event, _index, { id: systemId, display_name: displayName }) => {\n                                                activateSystem(() => ({\n                                                    id: systemId,\n                                                    displayName\n                                                }));\n                                                handleModalToggle(() => true);\n                                            }\n                                        }, {\n                                            title: 'Edit',\n                                            onClick: (_event, _index, data) => {\n                                                activateSystem(() => data);\n                                                onEditOpen(() => true);\n                                            }\n                                        }\n                                    ],\n                                    actionsConfig: {\n                                        actions: [{\n                                            label: 'Delete',\n                                            props: {\n                                                isDisabled: calculateSelected() === 0,\n                                                variant: 'secondary',\n                                                onClick: () => {\n                                                    activateSystem(Array.from(selected.values()));\n                                                    handleModalToggle(true);\n                                                }\n                                            }\n                                        }]\n                                    },\n                                    bulkSelect: {\n                                        count: calculateSelected(),\n                                        items: [{\n                                            title: 'Select none (0)',\n                                            onClick: () => {\n                                                onSelectRows(-1, false);\n                                            }\n                                        },\n                                        {\n                                            ...loaded && rows && rows.length > 0 ? {\n                                                title: `Select page (${ rows.length })`,\n                                                onClick: () => {\n                                                    onSelectRows(0, true);\n                                                }\n                                            } : {}\n                                        }],\n                                        checked: calculateChecked(rows, selected),\n                                        onSelect: (value) => {\n                                            onSelectRows(0, value);\n                                        }\n                                    }\n                                })}\n                                tableProps={{\n                                    canSelectAll: false\n                                }}\n                                onRowClick={(_e, id, app) => history.push(`/${id}${app ? `/${app}` : ''}`)}\n                                onLoad={({ mergeWithEntities, INVENTORY_ACTION_TYPES }) => {\n                                    getRegistry().register({\n                                        ...mergeWithEntities(entitiesReducer(INVENTORY_ACTION_TYPES))\n                                    });\n\n                                    setFilter(generateFilter(status, source, tagsFilter, filterbyName));\n\n                                    if (perPage || page) {\n                                        setPagination(\n                                            Array.isArray(page) ? page[0] : page,\n                                            Array.isArray(perPage) ? perPage[0] : perPage\n                                        );\n                                    }\n                                }}\n                            />\n                        }\n                    </GridItem>\n                </Grid>\n            </Main>\n            <DeleteModal\n                handleModalToggle={handleModalToggle}\n                isModalOpen={isModalOpen}\n                currentSytem={currentSytem}\n                onConfirm={() => {\n                    let displayName;\n                    let removeSystems;\n                    if (Array.isArray(currentSytem)) {\n                        removeSystems = currentSytem.map(({ id }) => id);\n                        displayName = currentSytem.length > 1 ?\n                            `${currentSytem.length} systems` :\n                            currentSytem[0].display_name;\n                    } else {\n                        displayName = currentSytem.displayName;\n                        removeSystems = [currentSytem.id];\n                    }\n\n                    addNotification({\n                        id: 'remove-initiated',\n                        variant: 'warning',\n                        title: 'Delete operation initiated',\n                        description: `Removal of ${displayName} started.`,\n                        dismissable: false\n                    });\n                    deleteEntity(removeSystems, displayName, () => onRefresh({ filters }));\n                    handleModalToggle(false);\n                }}\n            />\n\n            <TextInputModal\n                title=\"Edit display name\"\n                isOpen={ediOpen}\n                value={currentSytem.display_name}\n                onCancel={() => onEditOpen(false)}\n                onSubmit={(value) => {\n                    updateDisplayName(currentSytem.id, value, inventory.current.onRefreshData);\n                    onEditOpen(false);\n                }}\n            />\n        </React.Fragment>\n    );\n};\n\nInventory.contextTypes = {\n    store: PropTypes.object\n};\n\nInventory.propTypes = {\n    rows: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.string,\n        selected: PropTypes.bool\n    })),\n    loaded: PropTypes.bool,\n    loadEntity: PropTypes.func,\n    clearNotifications: PropTypes.func,\n    deleteEntity: PropTypes.func,\n    addNotification: PropTypes.func,\n    updateDisplayName: PropTypes.func,\n    onSelectRows: PropTypes.func,\n    setFilter: PropTypes.func,\n    selected: PropTypes.object,\n    status: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n    source: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n    filterbyName: PropTypes.string,\n    tagsFilter: PropTypes.any,\n    history: PropTypes.shape({\n        push: PropTypes.func\n    }),\n    page: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    perPage: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    setPagination: PropTypes.func\n};\n\nfunction mapDispatchToProps(dispatch) {\n    const reloadWrapper = (event, callback) => {\n        event.payload.then(callback);\n        return event;\n    };\n\n    return {\n        loadEntity: (id) => dispatch(actions.loadEntity(id)),\n        clearNotifications: () => dispatch(actions.clearNotifications()),\n        deleteEntity: (id, hostName, callback) => dispatch(reloadWrapper(actions.deleteEntity(id, hostName), callback)),\n        addNotification: (payload) => dispatch(addNotification(payload)),\n        updateDisplayName: (id, displayName, callback) => dispatch(\n            reloadWrapper(actions.editDisplayName(id, displayName), callback)\n        ),\n        onSelectRows: (id, isSelected) => dispatch(actions.selectEntity(id, isSelected)),\n        setFilter: (filtersList) => filtersList?.length > 0 && dispatch(actions.setFilter(filtersList)),\n        setPagination: (page, perPage) => dispatch(actions.setPagination(page, perPage))\n    };\n}\n\nexport default routerParams(connect(({ entities }) => ({\n    rows: entities && entities.rows,\n    loaded: entities && entities.loaded,\n    selected: entities && entities.selected\n}), mapDispatchToProps)(Inventory));\n"],"sourceRoot":""}