(self.webpackChunkinsights_inventory_frontend=self.webpackChunkinsights_inventory_frontend||[]).push([[34],{13784:(e,t,n)=>{"use strict";n.d(t,{js:()=>r,h3:()=>a});var r=[{staleFilter:["fresh","stale"]},{registeredWithFilter:["insights"]}],i=function(e){return!e||0===(null==e?void 0:e.length)},a=function(e,t,n,r){return[!i(e)&&{staleFilter:Array.isArray(e)?e:[e]},!i(n)&&{tagFilters:Array.isArray(n)?n:[n]},!i(t)&&{registeredWithFilter:Array.isArray(t)?t:[t]},!i(r)&&{value:"hostname_or_id",filter:Array.isArray(r)?r[0]:r},(!i(e)||!i(n)||!i(r))&&i(t)&&{registeredWithFilter:[]},(!i(t)||!i(n)||!i(r))&&i(e)&&{staleFilter:[]}].filter(Boolean)}},80815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(92950),i=n.n(r),a=n(45697),l=n.n(a),o=n(80236),s=n(79851),c=n(34512),u=n(49739),d=n(83826),f=n(48140),g=n(86050),p=n(47173),m=n(94008),h=n(69957),v=function(e){var t,n=e.handleModalToggle,r=e.isModalOpen,a=e.currentSytem,l=e.onConfirm,v="system";return Array.isArray(a)?(t=1===a.length?a[0].display_name:"".concat(a.length," systems"),v=1===a.length?v:"systems"):t=a.displayName,i().createElement(o.u,{variant:"small",title:"Remove from inventory",className:"ins-c-inventory__table--remove",isOpen:r,onClose:function(){return n(!1)},appendTo:document.getElementsByClassName("inventory")[0]},i().createElement(s.P,{hasGutter:!0},i().createElement(c.J,null,i().createElement(h.ZP,{size:"xl",className:"ins-m-alert"})),i().createElement(c.J,{isFilled:!0},i().createElement(u.K,{hasGutter:!0},i().createElement(d.v,null,t," will be removed from all ",location.host," applications and services. You need to re-register the ",v," to add it back to your inventory."),i().createElement(d.v,null,"To disable the daily upload for this ",v,", use the following command:"),i().createElement(d.v,null,i().createElement(m.M5,null,"insights-client --unregister"))))),i().createElement(f.a,{hasGutter:!0},i().createElement(g.Z,null,i().createElement(p.zx,{variant:"danger",onClick:l,ouiaId:"confirm-delete"},"Remove"),i().createElement(p.zx,{variant:"link",onClick:function(){return n(!1)}},"Cancel"))))},y=l().shape({id:l().string,displayName:l().string});v.propTypes={isModalOpen:l().bool,currentSytem:l().oneOfType([y,l().arrayOf(y)]),handleModalToggle:l().func,onConfirm:l().func},v.defaultProps={isModalOpen:!1,currentSytem:{},handleModalToggle:function(){},onConfirm:function(){}};const b=v},32034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calculatePagination:()=>R,default:()=>j});var r=n(22122),i=n(96156),a=n(81253),l=n(34738),o=n(92950),s=n.n(o),c=n(45697),u=n.n(c),d=n(557),f=(n(89223),n(36873)),g=n(48716),p=n(39173),m=n(86350),h=n(30319),v=n(50289),y=n(50693),b=n(16475),E=n(35435),F=n(80815),O=n(11778),N=n(94654),_=n.n(N),w=n(13784),C=n(33739);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){var n=e.id;return t&&t.has(n)}))?e.length>0:e.some((function(e){var n=e.id;return t&&t.has(n)}))&&null},T=function(e){var t=e.category;return e.values.map((function(e){var n=e.tagKey,r=e.value;return"".concat(t?"".concat(t,"/"):"").concat(n).concat(r?"=".concat(r):"")}))},k={staleFilter:function(e,t){return e.staleFilter.forEach((function(e){return t.append("status",e)}))},registeredWithFilter:function(e,t){var n=e.registeredWithFilter;return null==n?void 0:n.forEach((function(e){return t.append("source",e)}))},value:function(e,t){var n=e.value,r=e.filter;return"hostname_or_id"===n&&Boolean(r)&&t.append("hostname_or_id",r)},tagFilters:function(e,t){var n=e.tagFilters;return(null==n?void 0:n.length)>0&&t.append("tags",_()(n,T))}},R=function(e,t,n){var r=new URLSearchParams(location.search),i=void 0!==t?t:r.get("page"),a=void 0!==n?n:r.get("per_page");!isNaN(parseInt(i))&&e.append("page",i),!isNaN(parseInt(a))&&e.append("per_page",a)},Z=function(e){var t=e.clearNotifications,n=e.deleteEntity,i=e.addNotification,c=e.loaded,u=e.rows,f=e.updateDisplayName,v=e.onSelectRows,E=e.selected,N=e.status,_=e.setFilter,P=e.history,T=e.source,Z=e.filterbyName,j=e.tagsFilter,D=e.page,I=e.perPage,M=e.setPagination;document.title="Inventory | Red Hat Insights";var L=(0,o.useContext)(h.gE).getRegistry,W=(0,o.useRef)(null),x=(0,o.useState)(!1),G=(0,l.Z)(x,2),z=G[0],B=G[1],Y=(0,o.useState)({}),J=(0,l.Z)(Y,2),K=J[0],U=J[1],V=(0,o.useState)([]),q=(0,l.Z)(V,2),H=q[0],$=q[1],Q=(0,o.useState)(!1),X=(0,l.Z)(Q,2),ee=X[0],te=X[1],ne=(0,o.useState)({globalFilterChanged:0}),re=(0,l.Z)(ne,2),ie=re[0],ae=ie.globalFilterChanged,le=(0,a.Z)(ie,["globalFilterChanged"]),oe=re[1],se=(0,d.useSelector)((function(e){var t=e.permissionsReducer;return{loading:null==t?void 0:t.loading,writePermissions:null==t?void 0:t.writePermissions}}),d.shallowEqual),ce=se.loading,ue=se.writePermissions,de=function(e,t){null!=e&&e.filters||(e.filters=w.js);var n=null==e?void 0:e.filters.reduce((function(e,t){return S(S(S(S(S({},e),(null==t?void 0:t.staleFilter)&&{status:t.staleFilter}),(null==t?void 0:t.registeredWithFilter)&&{source:t.registeredWithFilter}),(null==t?void 0:t.tagFilters)&&{tagsFilter:t.tagFilters}),"hostname_or_id"===(null==t?void 0:t.value)&&{filterbyName:t.filter})}),{status:void 0,source:void 0,tagsFilter:void 0,filterbyName:void 0}),r=n.status,i=n.source,a=n.tagsFilter,l=n.filterbyName;e.filters=(0,w.h3)(r,i,a,l),$(null==e?void 0:e.filters);var o=new URLSearchParams;!function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){Object.keys(t).forEach((function(n){var r;null==k||null===(r=k[n])||void 0===r||r.call(k,t,e)}))}))}(o,null==e?void 0:e.filters),R(o,null==e?void 0:e.page,null==e?void 0:e.per_page);var s=o.toString();P.push({search:s,hash:location.hash}),!t&&W&&W.current?W.current.onRefreshData(e):t&&t(e)};(0,o.useEffect)((function(){var e,n;null===(e=insights.chrome)||void 0===e||null===(n=e.hideGlobalFilter)||void 0===n||n.call(e,!1),insights.chrome.appAction("system-list"),insights.chrome.appObjectId(),insights.chrome.on("GLOBAL_FILTER_UPDATE",(function(e){var t,n,r=e.data,i=null===(t=insights.chrome)||void 0===t||null===(n=t.mapGlobalFilter)||void 0===n?void 0:n.call(t,r,!1,!0),a=(0,l.Z)(i,3),o=a[0],s=a[1],c=a[2];oe((function(e){var t,n;return{globalFilterChanged:e.globalFilterChanged+1,tags:c,filter:S(S({},null==le?void 0:le.filter),{},{system_profile:S(S(S({},null==le||null===(t=le.filter)||void 0===t?void 0:t.system_profile),(null==o||null===(n=o.SAP)||void 0===n?void 0:n.isSelected)&&{sap_system:!0}),(null==s?void 0:s.length)>0&&{sap_sids:s})})}}))})),t()}),[]),(0,o.useEffect)((function(){W.current&&ae&&W.current.onRefreshData({})}),[ae]);var fe=function(){return E?E.size:0};return s().createElement(s().Fragment,null,s().createElement(g.Z,{className:"pf-m-light"},s().createElement(p.Z,{title:"Inventory"})),s().createElement(m.Z,null,s().createElement(y.r,{gutter:"md"},s().createElement(b.P,{span:12},!ce&&s().createElement(C.Z,(0,r.Z)({customFilters:le,isFullView:!0,ref:W,showTags:!0,onRefresh:de,hasCheckbox:ue},ue&&{actions:[{title:"Delete",onClick:function(e,t,n){var r=n.id,i=n.display_name;U((function(){return{id:r,displayName:i}})),B((function(){return!0}))}},{title:"Edit",onClick:function(e,t,n){U((function(){return n})),te((function(){return!0}))}}],actionsConfig:{actions:[{label:"Delete",props:{isDisabled:0===fe(),variant:"secondary",onClick:function(){U(Array.from(E.values())),B(!0)}}}]},bulkSelect:{count:fe(),items:[{title:"Select none (0)",onClick:function(){v(-1,!1)}},S({},c&&u&&u.length>0?{title:"Select page (".concat(u.length,")"),onClick:function(){v(0,!0)}}:{})],checked:A(u,E),onSelect:function(e){v(0,e)}}},{tableProps:{canSelectAll:!1},onRowClick:function(e,t,n){return P.push("/".concat(t).concat(n?"/".concat(n):""))},onLoad:function(e){var t=e.mergeWithEntities,n=e.INVENTORY_ACTION_TYPES;L().register(S({},t((0,h.zw)(n)))),_((0,w.h3)(N,T,j,Z)),(I||D)&&M(Array.isArray(D)?D[0]:D,Array.isArray(I)?I[0]:I)}}))))),s().createElement(F.Z,{handleModalToggle:B,isModalOpen:z,currentSytem:K,onConfirm:function(){var e,t;Array.isArray(K)?(t=K.map((function(e){return e.id})),e=K.length>1?"".concat(K.length," systems"):K[0].display_name):(e=K.displayName,t=[K.id]),i({id:"remove-initiated",variant:"warning",title:"Delete operation initiated",description:"Removal of ".concat(e," started."),dismissable:!1}),n(t,e,(function(){return de({filters:H})})),B(!1)}}),s().createElement(O.Z,{title:"Edit display name",isOpen:ee,value:K.display_name,onCancel:function(){return te(!1)},onSubmit:function(e){f(K.id,e,W.current.onRefreshData),te(!1)}}))};Z.contextTypes={store:u().object},Z.propTypes={rows:u().arrayOf(u().shape({id:u().string,selected:u().bool})),loaded:u().bool,loadEntity:u().func,clearNotifications:u().func,deleteEntity:u().func,addNotification:u().func,updateDisplayName:u().func,onSelectRows:u().func,setFilter:u().func,selected:u().object,status:u().oneOfType([u().arrayOf(u().string),u().string]),source:u().oneOfType([u().arrayOf(u().string),u().string]),filterbyName:u().string,tagsFilter:u().any,history:u().shape({push:u().func}),page:u().oneOfType([u().string,u().number]),perPage:u().oneOfType([u().string,u().number]),setPagination:u().func};const j=(0,f.Z)((0,d.connect)((function(e){var t=e.entities;return{rows:t&&t.rows,loaded:t&&t.loaded,selected:t&&t.selected}}),(function(e){var t=function(e,t){return e.payload.then(t),e};return{loadEntity:function(t){return e(v.A_(t))},clearNotifications:function(){return e(v.L1())},deleteEntity:function(n,r,i){return e(t(v.Ks(n,r),i))},addNotification:function(t){return e((0,E.addNotification)(t))},updateDisplayName:function(n,r,i){return e(t(v.$Y(n,r),i))},onSelectRows:function(t,n){return e(v.CL(t,n))},setFilter:function(t){return(null==t?void 0:t.length)>0&&e(v.Tv(t))},setPagination:function(t,n){return e(v.Jr(t,n))}}}))(Z))}}]);
//# sourceMappingURL=../sourcemaps/34.542e3da57d43304449ec.js.map