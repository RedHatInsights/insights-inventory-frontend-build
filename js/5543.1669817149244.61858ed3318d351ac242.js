"use strict";(self.webpackChunkinsights_inventory_frontend=self.webpackChunkinsights_inventory_frontend||[]).push([[5543],{53754:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(92950);const i=n.n(r)().createContext("light")},14748:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(85893),i=n(92950),a=n.n(i),o=n(94184),l=n.n(o),c=n(32384),s=n(53754),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},d=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};const p=(0,c.connect)((function(e){var t=e.routerData;return{params:t&&t.params,path:t&&t.path}}),(function(){return{}}))((function(e){var t=e.path,n=e.params,i=void 0===n?{}:n,o=e.children,c=e.className,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["path","params","children","className"]),f=function(){var e,n,r;if(null===(r=null===(n=null===(e=null===window||void 0===window?void 0:window.insights)||void 0===e?void 0:e.chrome)||void 0===n?void 0:n.$internal)||void 0===r?void 0:r.store){var a=window.insights.chrome.$internal.store.getState();if(t&&a)return t.split("/").reduce((function(e,t){var n,r;return 0===t.indexOf(":")?e.dynamic=u(u({},e.dynamic),((n={})["data-".concat((r=t.substr(1),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))]=i[t.substr(1)],n)):e.staticPart=d(d([],e.staticPart,!0),""!==t?[t]:[],!0),e}),{staticPart:[a.chrome.appId],dynamic:{}})}return{staticPart:[],dynamic:void 0}}(),h=f.dynamic,v=f.staticPart;return(0,r.jsx)(s.Z.Consumer,{children:function(e){var t;void 0===e&&(e="light");var n=l()(((t={})["pf-m-".concat(e)]="dark"===e,t));return{dark:(0,r.jsx)("section",u({},p,h,{"page-type":v.join("-"),className:"".concat(l()(c,"pf-l-page__main-section pf-c-page__main-section")," ").concat(n)},{children:a().Children.map(o,(function(e){return a().cloneElement(e,{className:"pf-m-dark"})}))})),light:(0,r.jsx)("section",u({},p,h,{"page-type":v.join("-"),className:"".concat(l()(c,"pf-l-page__main-section pf-c-page__main-section"))},{children:o}))}[e]}})}))},80123:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(85893),i=n(94184),a=n.n(i),o=n(53754),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};const c=function(e){var t=e.className,n=e.children,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","children"]),c=a()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return(0,r.jsx)(o.Z.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var s=a()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,r.jsx)("section",l({},i,{className:"".concat(c," ").concat(s),"widget-type":"InsightsPageHeader"},{children:n}))}})}},94800:(e,t,n)=>{n.r(t),n.d(t,{calculatePagination:()=>L,default:()=>R});var r=n(87462),i=n(4942),a=n(29439),o=n(92950),l=n.n(o),c=n(45697),s=n.n(c),u=n(32384),d=n(75662),p=n(80123),f=n(85893),h=n(94184),v=n.n(h),g=n(76857),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};const y=function(e){var t=e.className,n=e.title,r=v()(t);return(0,f.jsx)(g.Title,m({headingLevel:"h1",size:"2xl",className:r,"widget-type":"InsightsPageHeaderTitle"},{children:n}))};var O=n(14748),b=n(30319),F=n(14122),j=n(94778),w=n(50693),_=n(16475),S=n(83215),P=n(39903),E=n(95045),N=n(94654),k=n.n(N),Z=n(13784),C=n(52165);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){var n=e.id;return t&&t.has(n)}))?e.length>0:e.some((function(e){var n=e.id;return t&&t.has(n)}))&&null},I=function(e){var t=e.category;return e.values.map((function(e){var n=e.tagKey,r=e.value;return"".concat(t?"".concat(t,"/"):"").concat(n).concat(r?"=".concat(r):"")}))},M={staleFilter:function(e,t){return e.staleFilter.forEach((function(e){return t.append("status",e)}))},osFilter:function(e,t){var n=e.osFilter;return null==n?void 0:n.forEach((function(e){return t.append("operating_system",e)}))},registeredWithFilter:function(e,t){var n=e.registeredWithFilter;return null==n?void 0:n.forEach((function(e){return t.append("source",e)}))},value:function(e,t){var n=e.value,r=e.filter;return"hostname_or_id"===n&&Boolean(r)&&t.append("hostname_or_id",r)},tagFilters:function(e,t){var n=e.tagFilters;return(null==n?void 0:n.length)>0&&t.append("tags",k()(n,I))},rhcdFilter:function(e,t){var n=e.rhcdFilter;return null==n?void 0:n.forEach((function(e){return t.append(Z.Ih,e)}))},updateMethodFilter:function(e,t){var n=e.updateMethodFilter;return null==n?void 0:n.forEach((function(e){return t.append(Z.cE,e)}))}},L=function(e,t,n){var r=new URLSearchParams(location.search),i=void 0!==t?t:r.get("page"),a=void 0!==n?n:r.get("per_page");!isNaN(parseInt(i))&&e.append("page",i),!isNaN(parseInt(a))&&e.append("per_page",a)},D=function(e){var t=e.status,n=e.source,c=e.filterbyName,s=e.tagsFilter,f=e.operatingSystem,h=e.rhcdFilter,v=e.updateMethodFilter,g=e.page,m=e.perPage,N=e.initialLoading,k=(0,o.useState)(),A=(0,a.Z)(k,2),I=A[0],D=A[1];document.title="Inventory | Red Hat Insights";var R=(0,d.useHistory)(),$=(0,u.useStore)(),H=(0,Z.jy)(),W=(0,o.useRef)(null),z=(0,o.useState)(!1),B=(0,a.Z)(z,2),G=B[0],U=B[1],q=(0,o.useState)({}),K=(0,a.Z)(q,2),J=K[0],Q=K[1],V=(0,o.useState)([]),Y=(0,a.Z)(V,2),X=Y[0],ee=Y[1],te=(0,o.useState)(!1),ne=(0,a.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,o.useState)(),oe=(0,a.Z)(ae,2),le=oe[0],ce=oe[1],se=(0,Z.Mo)(),ue=(0,u.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.rows}),u.shallowEqual),de=(0,u.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),pe=(0,u.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.selected})),fe=(0,u.useDispatch)(),he=function(e,t){return fe(j.CL(e,t))},ve=function(e,t){null!=e&&e.filters||(e.filters=Object.entries(Z.js).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,i.Z)({},n,r)})));var n=null==e?void 0:e.filters.filter((function(e){return e.osFilter})),r=((null==e?void 0:e.filters)||[]).reduce((function(e,t){return T(T(T(T(T(T(T(T({},e),(null==t?void 0:t.staleFilter)&&{status:t.staleFilter}),(null==t?void 0:t.registeredWithFilter)&&{source:t.registeredWithFilter}),(null==t?void 0:t.tagFilters)&&{tagsFilter:t.tagFilters}),"hostname_or_id"===(null==t?void 0:t.value)&&{filterbyName:t.filter}),(null==t?void 0:t.osFilter)&&{operatingSystem:n[0].osFilter.length>0?n[0].osFilter:Object.values(t.osFilter||{}).flatMap((function(e){return Object.keys(e)}))}),t.rhcdFilter&&{rhcdFilter:t.rhcdFilter}),t.updateMethodFilter&&{updateMethodFilter:t.updateMethodFilter})}),{}),o=r.status,l=r.source,c=r.tagsFilter,s=r.filterbyName,u=r.operatingSystem,d=r.rhcdFilter,p=r.updateMethodFilter;e.filters=(0,Z.h3)(o,l,c,s,u,d,p),ee(null==e?void 0:e.filters);var f=new URLSearchParams;!function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){Object.keys(t).forEach((function(n){var r;null==M||null===(r=M[n])||void 0===r||r.call(M,t,e)}))}))}(f,null==e?void 0:e.filters),L(f,null==e?void 0:e.page,null==e?void 0:e.per_page);var h=f.toString();R.push({search:h,hash:location.hash}),!t&&null!=W&&W.current?W.current.onRefreshData(e):t&&t(e)};(0,o.useEffect)((function(){var e,r;null===(e=insights.chrome)||void 0===e||null===(r=e.hideGlobalFilter)||void 0===r||r.call(e,!1),insights.chrome.appAction("system-list"),insights.chrome.appObjectId(),insights.chrome.on("GLOBAL_FILTER_UPDATE",(function(e){var t,n,r,i,o,l,c=e.data,s=null===(t=insights.chrome)||void 0===t||null===(n=t.mapGlobalFilter)||void 0===n?void 0:n.call(t,c,!1,!0),u=(0,a.Z)(s,3),d=u[0],p=u[1],f=u[2];ce({tags:f,filter:T(T({},null==le?void 0:le.filter),{},{system_profile:T(T(T(T(T({},null==le||null===(r=le.filter)||void 0===r?void 0:r.system_profile),(null==d||null===(i=d.SAP)||void 0===i?void 0:i.isSelected)&&{sap_system:!0}),d&&(null===(o=d["Ansible Automation Platform"])||void 0===o?void 0:o.isSelected)&&{ansible:"not_nil"}),(null==d||null===(l=d["Microsoft SQL"])||void 0===l?void 0:l.isSelected)&&{mssql:"not_nil"}),(null==p?void 0:p.length)>0&&{sap_sids:p})})})})),fe(j.L1());var i=(0,C.g)($,void 0,void 0,!0).InventoryTable;D((function(){return i})),H().register(T({},(0,F.AF)(b.M)));var o=(0,Z.h3)(t,n,s,c,f,h,v);(null==o?void 0:o.length)>0&&fe(j.Tv(o)),(m||g)&&fe(j.Jr(Array.isArray(g)?g[0]:g,Array.isArray(m)?m[0]:m))}),[]);var ge=function(){return pe?pe.size:0};return l().createElement(l().Fragment,null,l().createElement(p.Z,{className:"pf-m-light"},l().createElement(y,{title:"Inventory"})),l().createElement(O.Z,null,l().createElement(w.r,{gutter:"md"},l().createElement(_.P,{span:12},I&&l().createElement(I,(0,r.Z)({history:R,store:$,customFilters:le,isFullView:!0,ref:W,showTags:!0,onRefresh:ve,hasCheckbox:se,autoRefresh:!0,initialLoading:N,activeFiltersConfig:{showDeleteButton:!0}},se&&{actions:[{title:"Delete",onClick:function(e,t,n){var r=n.id,i=n.display_name;Q((function(){return{id:r,displayName:i}})),U((function(){return!0}))}},{title:"Edit",onClick:function(e,t,n){Q((function(){return n})),ie((function(){return!0}))}}],actionsConfig:{actions:[{label:"Delete",props:{isDisabled:0===ge(),variant:"secondary",onClick:function(){Q(Array.from(pe.values())),U(!0)}}}]},bulkSelect:{count:ge(),id:"bulk-select-systems",items:[{title:"Select none (0)",onClick:function(){he(-1,!1)}},T({},de&&ue&&ue.length>0?{title:"Select page (".concat(ue.length,")"),onClick:function(){he(0,!0)}}:{})],checked:x(ue,pe),onSelect:function(e){he(0,e)}}},{tableProps:{canSelectAll:!1},onRowClick:function(e,t,n){return R.push("/".concat(t).concat(n?"/".concat(n):""))}}))))),l().createElement(P.Z,{handleModalToggle:U,isModalOpen:G,currentSytems:J,onConfirm:function(){var e,t,n,r;Array.isArray(J)?(t=J.map((function(e){return e.id})),e=J.length>1?"".concat(J.length," systems"):J[0].display_name):(e=J.displayName,t=[J.id]),fe((0,S.wN)({id:"remove-initiated",variant:"warning",title:"Delete operation initiated",description:"Removal of ".concat(e," started."),dismissable:!1})),fe((r=function(){return ve({filters:X})},(n=j.Ks(t,e)).payload.then(r),n)),U(!1)}}),l().createElement(E.TextInputModal,{title:"Edit display name",isOpen:re,value:J.display_name,onCancel:function(){return ie(!1)},onSubmit:function(e){fe(j.$Y(J.id,e)),ie(!1)}}))};D.propTypes={status:s().oneOfType([s().arrayOf(s().string),s().string]),source:s().oneOfType([s().arrayOf(s().string),s().string]),operatingSystem:s().oneOfType([s().arrayOf(s().string),s().string]),filterbyName:s().string,tagsFilter:s().any,page:s().oneOfType([s().string,s().number]),perPage:s().oneOfType([s().string,s().number]),initialLoading:s().bool,rhcdFilter:s().oneOfType([s().arrayOf(s().string),s().string]),updateMethodFilter:s().oneOfType([s().arrayOf(s().string),s().string])},D.defaultProps={initialLoading:!0};const R=D}}]);
//# sourceMappingURL=../sourcemaps/5543.5468a1242345c96253fb32749bf9f2e9.js.map