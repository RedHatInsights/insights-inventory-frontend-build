"use strict";(self.webpackChunkinsights_inventory_frontend=self.webpackChunkinsights_inventory_frontend||[]).push([[9379],{98436:(e,t,n)=>{n.d(t,{VU:()=>u,Zf:()=>d,VT:()=>f});var r=n(45987),a=n(4942),o=n(29439),i=n(73880),l=["label"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return e.reduce((function(e,t){var n=t.split("."),r=(0,o.Z)(n,2),i=r[0],l=r[1];return e["".concat(i,".0")]=c(c({},e["".concat(i,".0")]||{}),{},(0,a.Z)({},"".concat(i,".").concat(l),!0)),e}),{})},p=function(e){return e.filter((function(e){return"0"===e.value.split(".")[1]})).map((function(t){return c(c({},t),{},{groupSelectable:!0,items:e.filter((function(e){var n=e.value.split("."),r=(0,o.Z)(n,2),a=r[0],i=r[1];return a===t.value.split(".")[0]&&"0"!==i})).sort((function(e){return e.value.split(".")[1]}))})}))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(c({},e),{},{label:"Operating System",type:"group",filterValues:{selected:e.value,onChange:e.onChange,groups:p(i.operatingSystems).map((function(e){var t;return c(c({},e),{},{type:"checkbox",items:null===(t=e.items)||void 0===t?void 0:t.map((function(e){return c(c({},e),{},{type:"checkbox"})}))})}))}})},f=function(e){var t=Object.values(e||{}).flatMap((function(e){return Object.keys(e)}));return(null==t?void 0:t.length)>0?[{category:"Operating System",type:i.OS_CHIP,chips:i.operatingSystems.filter((function(e){var n=e.value;return t.some((function(e){return e===n}))})).map((function(e){return c({name:e.label},(0,r.Z)(e,l))}))}]:[]}},29379:(e,t,n)=>{n.r(t),n.d(t,{inventoryConnector:()=>Sn});var r={};n.r(r),n.d(r,{OPERATING_SYSTEM_FILTER:()=>St,REGISTERED_WITH_FILTER:()=>vt,STALENESS_FILTER:()=>ct,TEXT_FILTER:()=>nt,filtersReducer:()=>kt,operatingSystemFilterReducer:()=>Dt,operatingSystemFilterState:()=>Pt,registeredWithFilterReducer:()=>yt,registeredWithFilterState:()=>gt,stalenessFilterReducer:()=>ut,stalenessFilterState:()=>st,textFilterReducer:()=>rt,textFilterState:()=>tt,useOperatingSystemFilter:()=>jt,useRegisteredWithFilter:()=>ht,useStalenessFilter:()=>pt,useTagsFilter:()=>Ot,useTextFilter:()=>at});var a=n(87462),o=n(4942),i=n(96985),l=n.n(i),s=n(4874),c=n(32384),u=n(45697),p=n.n(u),d=n(94778),f=n(9947),m=n(38424),g=n(75106),v=n(60485),y=n(47173),h=n(96733),b=n(27361),E=n.n(b),O=function(e,t){t?t():document.referrer&&document.referrer!=="".concat(document.location.origin).concat(document.location.pathname)?history.back():location.href=location.pathname.replace(new RegExp("".concat([e],".*"),"g"),"")},w=function(e,t){return E()(t,e,void 0)},T=function(e){var t=e.inventoryId,n=e.onBackToListClick;return l().createElement(f.u,{variant:f.I.full},l().createElement(m.k,{icon:h.ZP}),l().createElement(v.D,{headingLevel:"h5",size:"lg"},"System not found"),l().createElement(g.B,null,"System with ID ",t," does not exist"),l().createElement(y.zx,{variant:"primary",onClick:function(){return O(t,n)}},"Back to previous page"))};T.propTypes={inventoryId:p().string,onBackToListClick:p().func};const P=T;var S=n(45987),D=n(93433),j=n(29439),Z=n(73880),F=n(35664),k=n(56787),I=n(84457),R=n(99355),C=n(75728),L=n(28191),_=n(92298),W=n(79851),B=n(34512),A=["title"],N=function(e){var t=e.entity,n=e.loaded,r=e.actions,o=e.deleteEntity,s=e.addNotification,u=e.hideInvLink,p=e.onBackToListClick,f=e.showDelete,m=e.showInventoryDrawer,g=e.TitleWrapper,h=e.TagsWrapper,b=e.DeleteWrapper,E=e.ActionsWrapper,w=e.showTags,T=(0,c.useDispatch)(),P=(0,i.useState)(!1),N=(0,j.Z)(P,2),x=N[0],z=N[1],H=(0,i.useState)(!1),U=(0,j.Z)(H,2),M=U[0],V=U[1],G=[].concat((0,D.Z)(u?[]:[{title:"View system in Inventory",component:"a",href:"./insights/inventory/".concat(null==t?void 0:t.id)}]),(0,D.Z)(r||[]));return l().createElement(W.P,{className:"ins-c-inventory__detail--header"},l().createElement(B.J,{isFilled:!0},n?l().createElement(L.k,null,l().createElement(_.B,null,l().createElement(g,null,l().createElement(v.D,{headingLevel:"h1",size:"2xl"},t&&t.display_name))),w&&l().createElement(_.B,null,l().createElement(h,null,l().createElement(Z.TagWithDialog,{count:t&&t.tags&&t.tags.length,systemId:t&&t.id}),l().createElement(Z.TagsModal,null)))):l().createElement(F.Z,{size:F.i.md})),l().createElement(B.J,null,n?l().createElement(L.k,null,f&&l().createElement(_.B,null,l().createElement(b,null,l().createElement(y.zx,{onClick:function(){return V(!0)},variant:"secondary"},"Delete"))),(null==G?void 0:G.length)>0&&l().createElement(_.B,null,l().createElement(E,null,l().createElement(k.L,{onSelect:function(){return z(!1)},toggle:l().createElement(C.Z,{onToggle:function(e){return z(e)}},"Actions"),isOpen:x,position:R.ir.right,dropdownItems:G.map((function(e,t){var n=e.title,r=(0,S.Z)(e,A);return l().createElement(I.h,(0,a.Z)({key:t,component:"button",onClick:function(e){return r.onClick(e,r,r.key||t)}},r),n)}))}))),l().createElement(_.B,null,m&&l().createElement(y.zx,{onClick:function(){return T((0,d.wb)(!0))}},"Show more information"))):l().createElement(F.Z,{size:F.i.lg})),M&&l().createElement(Z.DeleteModal,{handleModalToggle:function(){return V(!M)},isModalOpen:M,currentSytems:t,onConfirm:function(){s({id:"remove-initiated",variant:"warning",title:"Delete operation initiated",description:"Removal of ".concat(t.display_name," started."),dismissable:!1}),o([t.id],t.display_name,(function(){return O(t.id,p)})),V(!1)}}))};N.propTypes={entity:p().object,loaded:p().bool,showDelete:p().bool,hideInvLink:p().bool,showInventoryDrawer:p().bool,showTags:p().bool,actions:p().arrayOf(p().shape({key:p().string,title:p().node,onClick:p().func})),deleteEntity:p().func,addNotification:p().func,onBackToListClick:p().func,TitleWrapper:p().elementType,TagsWrapper:p().elementType,DeleteWrapper:p().elementType,ActionsWrapper:p().elementType},N.defaultProps={actions:[],loaded:!1,hideInvLink:!1,showDelete:!1,showInventoryDrawer:!1,deleteEntity:function(){},addNotification:function(){},onBackToListClick:function(){},TitleWrapper:i.Fragment,TitleWTagsWrapperrapper:i.Fragment,DeleteWrapper:i.Fragment,ActionsWrapper:i.Fragment};const x=N;var z=n(50693),H=n(16475),U=n(62410),M=n(12385),V=n(67882),G=["entity","loaded","UUIDWrapper","LastSeenWrapper"],K=function(e){var t=e.entity,n=e.loaded,r=(e.UUIDWrapper,e.LastSeenWrapper),o=(0,S.Z)(e,G);return l().createElement(z.r,(0,a.Z)({className:"ins-entity-facts"},o),l().createElement(H.P,{md:6},l().createElement(L.k,null,l().createElement(_.B,null,"UUID:"),l().createElement(_.B,{grow:{default:"grow"}},n?w("id",t)||" ":l().createElement(F.Z,{size:F.i.md,fontSize:"sm"}))),l().createElement(L.k,null,l().createElement(_.B,null,"Last seen:"),l().createElement(_.B,{grow:{default:"grow"}},n?l().createElement(r,null,M.Z?l().createElement(M.Z,{culled:w("culled_timestamp",t),staleWarning:w("stale_warning_timestamp",t),stale:w("stale_timestamp",t),currDate:new Date},l().createElement(U.Z,{date:w("updated",t),type:"exact"})):l().createElement(U.Z,{date:w("updated",t),type:"exact"})):l().createElement(F.Z,{size:F.i.md,fontSize:"sm"})),n&&!w("insights_id",t)&&l().createElement(V.Z,null))))};K.propTypes={loaded:p().bool,entity:p().object,UUIDWrapper:p().elementType,LastSeenWrapper:p().elementType},K.defaultProps={UUIDWrapper:i.Fragment,LastSeenWrapper:i.Fragment};const q=K;var X=n(83215),J=n(71002),Y=n(14638),$=n(28883),Q=["onTabSelect","appList"],ee=function(e){var t,n,r=e.onTabSelect,o=e.appList,u=(0,S.Z)(e,Q),p=(0,s.useLocation)().search,f=(0,s.useHistory)(),m=(0,c.useDispatch)(),g=new URLSearchParams(p),v=(0,c.useSelector)((function(e){var t=e.entityDetails;return(null==t?void 0:t.activeApps)||[]})).filter((function(e){return!1!==e.isVisible})),y=(0,c.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.activeApp})),h=(0,c.useSelector)((function(e){var t=e.systemProfileStore;return null==t?void 0:t.disabledApps})),b=(null==y?void 0:y.appName)||(null==o||null===(t=o.find((function(e){var t,n=e.pageId,r=e.name;return(null==v||null===(t=v[0])||void 0===t?void 0:t.name)===(n||r)})))||void 0===t?void 0:t.name)||(null==v||null===(n=v[0])||void 0===n?void 0:n.name),E=o||v,O=(0,i.useState)(E),w=(0,j.Z)(O,2),T=w[0],P=w[1];return(0,i.useEffect)((function(){var e=g.get("appName");e&&m((0,d.Xe)(e))}),[]),(0,i.useEffect)((function(){var e=E.filter((function(e){return!(null!=h&&h.includes(e.name))}));0!==e&&void 0!==(0,J.Z)(e)?P(e):P(E)}),[h]),l().createElement(l().Fragment,null,(null==E?void 0:E.length)>1&&l().createElement(Y.m,(0,a.Z)({},u,{activeKey:b,onSelect:function(e,t){var n=T.find((function(e){return e.name===t}));r?r(e,t,n):(g.set("appName",n.name),f.push({search:g.toString()})),m((0,d.Xe)(n.name))},isFilled:!0,className:"ins-c-inventory-detail__app-tabs"}),null==T?void 0:T.map((function(e,t){return l().createElement($.O,{key:t,eventKey:e.name,title:e.title})}))))};ee.propTypes={appList:p().arrayOf(p().shape({title:p().node,name:p().string.isRequired,pageId:p().string})),onTabSelect:p().func};const te=ee;var ne=function(e){var t=e.actions,n=e.showTags,r=e.hideInvLink,a=e.onTabSelect,o=e.onBackToListClick,u=e.showDelete,p=e.appList,f=e.showInventoryDrawer,m=e.UUIDWrapper,g=e.LastSeenWrapper,v=e.TitleWrapper,y=e.TagsWrapper,h=e.DeleteWrapper,b=e.ActionsWrapper,E=e.children,O=(0,s.useParams)().inventoryId,w=(0,c.useDispatch)(),T=(0,c.useSelector)((function(e){var t=e.entityDetails;return(null==t?void 0:t.loaded)||!1})),S=(0,c.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity}));return(0,i.useEffect)((function(){var e=O||location.pathname.replace(/\/$/,"").split("/").pop();S&&(null==S?void 0:S.id)===e&&T||w((0,d.A_)(e,{hasItems:!0},{showTags:n}))}),[]),l().createElement("div",{className:"ins-entity-detail"},T&&!S?l().createElement(P,{onBackToListClick:o,inventoryId:location.pathname.split("/")[location.pathname.split("/").length-1]}):l().createElement(i.Fragment,null,l().createElement(x,{entity:S,loaded:T,onBackToListClick:o,actions:t,deleteEntity:function(e,t,n){var r=(0,d.Ks)(e,t);w((0,Z.reloadWrapper)(r,n))},addNotification:function(e){return w((0,X.wN)(e))},hideInvLink:r,showInventoryDrawer:f,showDelete:u,showTags:n,TitleWrapper:v,TagsWrapper:y,DeleteWrapper:h,ActionsWrapper:b}),l().createElement(q,{loaded:T,entity:S,UUIDWrapper:m,LastSeenWrapper:g}),E),T&&S&&l().createElement(te,{onTabSelect:a,appList:p}))};ne.propTypes={hideInvLink:p().bool,hideBack:p().bool,showTags:p().bool,showDelete:p().bool,showInventoryDrawer:p().bool,actions:p().arrayOf(p().shape({title:p().node,onClick:p().func,key:p().string})),appList:p().arrayOf(p().shape({title:p().node,name:p().string,pageId:p().string})),onTabSelect:p().func,onBackToListClick:p().func,children:p().node,UUIDWrapper:p().elementType,LastSeenWrapper:p().elementType,TitleWrapper:p().elementType,TagsWrapper:p().elementType,DeleteWrapper:p().elementType,ActionsWrapper:p().elementType},ne.defaultProps={actions:[],hideInvLink:!1,showTags:!1,UUIDWrapper:i.Fragment,LastSeenWrapper:i.Fragment,TitleWrapper:i.Fragment,TagsWrapper:i.Fragment,DeleteWrapper:i.Fragment,ActionsWrapper:i.Fragment};const re=ne;var ae=function(e){var t=e.componentMapper,n=e.appList,r=(0,c.useStore)(),a=(0,s.useLocation)().search,o=new URLSearchParams(a),u=(0,c.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.loaded})),p=(0,c.useSelector)((function(e){var t=e.entityDetails;return null==t?void 0:t.entity})),d=(0,c.useSelector)((function(e){var t,r,a,i=e.entityDetails;if(null!=i&&i.loaded)return(null===(t=n||(null==i?void 0:i.activeApps))||void 0===t||null===(r=t.find)||void 0===r?void 0:r.call(t,(function(e){var t;return(null==e?void 0:e.name)===(o.get("appName")||(null==i||null===(t=i.activeApp)||void 0===t?void 0:t.appName))})))||(null==i||null===(a=i.activeApps)||void 0===a?void 0:a[0])})),f=t||(null==d?void 0:d.component);return!0!==u||p?l().createElement(i.Fragment,null,u?d&&l().createElement("div",{className:"ins-active-app-".concat(null==d?void 0:d.name)},f?l().createElement(f,{store:r,inventoryId:null==p?void 0:p.id,appName:null==d?void 0:d.name}):"missing component"):l().createElement(F.Z,{size:F.i.md})):null};ae.propTypes={componentMapper:p().element,appList:p().arrayOf(p().shape({title:p().node,name:p().string,pageId:p().string}))};const oe=ae,ie=function(e){return l().createElement(i.Fragment,null,l().createElement(re,e),l().createElement(oe,e))};var le=n(5436),se=n(16941),ce=n(34241),ue=n(16537),pe=n(29821),de=n(76770),fe=n(58409),me=n(28985),ge=n(49739),ve=n(83826),ye=n(21899),he=n(26391),be=function(e){var t=e.hideInvLink,n=e.showTags,r=(0,c.useSelector)((function(e){var t=e.entityDetails.entity;return null==t?void 0:t.display_name})),a=(0,c.useSelector)((function(e){var t=e.entityDetails.entity;return null==t?void 0:t.id})),o=(0,c.useSelector)((function(e){var t=e.entityDetails.entity;return null==t?void 0:t.tags}));return l().createElement(ge.K,{hasGutter:!0},l().createElement(ve.v,null,l().createElement(W.P,null,l().createElement(B.J,{isFilled:!0},l().createElement(v.D,{headingLevel:"h3",size:"xl"},r)),!t&&l().createElement(B.J,null,l().createElement("a",{className:"ins-c-entity-detail__inv-link",href:"./insights/inventory/".concat(a)},"Open in Inventory")))),n&&l().createElement(ve.v,null,l().createElement(W.P,{hasGutter:!0},l().createElement(B.J,null,"Tags:"),l().createElement(B.J,null,l().createElement(he.Z,null,0!==(null==o?void 0:o.length)?null==o?void 0:o.map((function(e,t){return l().createElement(ye.A,{key:t,isReadOnly:!0},(null==e?void 0:e.namespace)&&"".concat(null==e?void 0:e.namespace,"/"),null==e?void 0:e.key,(null==e?void 0:e.value)&&"=".concat(null==e?void 0:e.value))})):"No tags")))))};be.propTypes={hideInvLink:p().bool,showTags:p().bool},be.defaultProps={hideInvLink:!1,showTags:!1};const Ee=be;var Oe=n(48140),we=n(86050),Te=n(52653),Pe=n(80971),Se=n(19210),De=function(e){var t,n,r,a,o,s,u,p,f,m,g=e.isOpened,y=(0,c.useDispatch)(),h=(0,c.useSelector)((function(e){var t=e.entityDetails.entity;return null==t?void 0:t.id})),b=(0,c.useSelector)((function(e){var t=e.entityDetails.systemIssues;return null==t?void 0:t.advisor})),E=(0,c.useSelector)((function(e){var t=e.entityDetails.systemIssues;return null==t?void 0:t.compliance})),O=(0,c.useSelector)((function(e){var t=e.entityDetails.systemIssues;return null==t?void 0:t.cve})),w=(0,c.useSelector)((function(e){var t=e.entityDetails.systemIssues;return null==t?void 0:t.patch}));return(0,i.useEffect)((function(){h&&g&&(y((0,d.gb)(h)),y((0,d.Oj)(h)),y((0,d.k0)(h)),y((0,d.Fo)(h)))}),[h,g]),l().createElement(ge.K,{hasGutter:!0,className:"ins-c-inventory__drawer-system-issues"},l().createElement(ve.v,null,l().createElement(v.D,{headingLevel:"h4",size:"lg"},"Top system issues")),l().createElement(ve.v,null,l().createElement(Oe.a,null,l().createElement(we.Z,null,l().createElement(ge.K,{hasGutter:!0},l().createElement(ve.v,{className:"ins-c-inventory__drawer--title"},"Applicable CVEs"),l().createElement(ve.v,null,null!=O&&O.isLoaded?l().createElement(Oe.a,{hasGutter:!0,className:"ins-c-inventory__drawer-cve"},l().createElement(we.Z,{className:"ins-m-critical"},l().createElement("a",{href:"/insights/vulnerability/systems/".concat(h,"?impact=7")},(null==O||null===(t=O.critical)||void 0===t?void 0:t.count)||0," critical")),l().createElement(we.Z,{className:"ins-m-important"},l().createElement("a",{href:"/insights/vulnerability/systems/".concat(h,"?impact=5")},(null==O||null===(n=O.important)||void 0===n?void 0:n.count)||0," important")),l().createElement(we.Z,{className:"ins-m-moderate"},l().createElement("a",{href:"/insights/vulnerability/systems/".concat(h,"?impact=4")},(null==O||null===(r=O.moderate)||void 0===r?void 0:r.count)||0," moderate")),l().createElement(we.Z,{className:"ins-m-low"},l().createElement("a",{href:"/insights/vulnerability/systems/".concat(h,"?impact=2")},(null==O||null===(a=O.low)||void 0===a?void 0:a.count)||0," low"))):l().createElement(F.Z,{size:F.i.md})))),l().createElement(we.Z,null,l().createElement(ge.K,{hasGutter:!0},l().createElement(ve.v,{className:"ins-c-inventory__drawer--title"},"Applicable advisories"),l().createElement(ve.v,null,null!=w&&w.isLoaded?l().createElement(Oe.a,{hasGutter:!0,className:"ins-c-inventory__drawer-patch"},l().createElement(we.Z,null,l().createElement("a",{href:"/insights/patch/systems/".concat(h,"/?advisory_type=2")},l().createElement(Te.ZP,null)," ",null==w||null===(o=w.bug)||void 0===o?void 0:o.count)),l().createElement(we.Z,{className:"ins-m-moderate"},l().createElement("a",{href:"/insights/patch/systems/".concat(h,"/?advisory_type=3")},l().createElement(Se.ZP,null)," ",null==w||null===(s=w.security)||void 0===s?void 0:s.count)),l().createElement(we.Z,null,l().createElement("a",{href:"/insights/patch/systems/".concat(h,"/?advisory_type=1")},l().createElement(Pe.ZP,null)," ",null==w||null===(u=w.enhancement)||void 0===u?void 0:u.count))):l().createElement(F.Z,{size:F.i.md})))))),l().createElement(ve.v,null,null!=b&&b.isLoaded?l().createElement("span",null,l().createElement("span",{className:"ins-m-critical"},(null==b||null===(p=b.criticalCount)||void 0===p?void 0:p.length)||0," critical")," recommendations in ",l().createElement("a",{href:"./insights/advisor/systems/".concat(h)},"Advisor")):l().createElement(F.Z,{size:F.i.md})),null!=E&&E.isLoaded?(null==E?void 0:E.profiles)&&l().createElement("span",null,"System above compliance threshold for ",l().createElement("a",{href:"./insights/compliance/reports/"},null==E||null===(f=E.profiles)||void 0===f?void 0:f.length," ",(null==E||null===(m=E.profiles)||void 0===m?void 0:m.length)>1?"policies":"policy")):l().createElement(F.Z,{size:F.i.md}))};De.propTypes={isOpened:p().bool};const je=De;var Ze=["children","hideInvLink","showTags","Wrapper","className","appName"],Fe=function(e){var t=e.children,n=e.hideInvLink,r=e.showTags,o=e.Wrapper,i=e.className,s=e.appName,u=(0,S.Z)(e,Ze),p=(0,c.useDispatch)(),f=(0,c.useStore)(),m=(0,c.useSelector)((function(e){return e.entityDetails.isToggleOpened})),g=(0,c.useSelector)((function(e){return e.entityDetails.entity})),v=(0,c.useSelector)((function(e){return e.entityDetails.loaded}));return l().createElement(le.dy,(0,a.Z)({className:"ins-c-inventory__drawer ".concat(i||""),isExpanded:m,onExpand:function(){return p((0,d.wb)(!0))}},u),l().createElement(ce.s,{panelContent:l().createElement(se.S,null,l().createElement(fe.h,null,l().createElement(Ee,{hideInvLink:n,showTags:r}),l().createElement(de.x,null,l().createElement(me.c,{onClick:function(){return p((0,d.wb)(!1))}}))),l().createElement(pe.F,null,l().createElement(ge.K,{className:"ins-c-inventory__drawer--content"},l().createElement(ve.v,null,l().createElement(je,{isOpened:m})),l().createElement(ve.v,{isFilled:!0,className:"ins-c-inventory__drawer--facts"},l().createElement(q,{entity:g,loaded:v}),m&&v&&o&&l().createElement(o,{store:f,appName:s})))))},l().createElement(ue.s,null,t)))};Fe.propTypes={children:p().any,hideInvLink:p().bool,showTags:p().bool,appName:p().oneOf(["general_information","advisor","insights","compliance","vulnerabilities","patch"]),className:p().string,Wrapper:p().elementType},Fe.defaultProps={appName:"general_information"};const ke=Fe;var Ie=n(454),Re=n(68595),Ce=n(84506),Le=n(3474),_e=n(81945),We=n(7887),Be=n(13784),Ae=n(23279),Ne=n.n(Ae),xe=n(94654),ze=n.n(xe),He=n(29673),Ue=n(85564),Me=n.n(Ue),Ve=n(13718),Ge=["actions","expandable","noSystemsTable"],Ke=["props","transforms","cellFormatters"];function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=function(e,t,n){return t.map((function(t){var r=t.key,a=t.composed,o=t.renderFunc,s=a?l().createElement(i.Fragment,null,(0,Ve.Z)(a.map((function(t){return E()(e,t," ")})),e.id,e,n)):E()(e,r," ");return o?l().createElement(i.Fragment,null,o(s,e.id,e,n)):s}))},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.actions,a=n.expandable,o=n.noSystemsTable,i=(0,S.Z)(n,Ge);return 0===e.length?[{cells:[{title:o,props:{colSpan:t.length+Boolean(r),dataLabel:null}}]}]:Me()(e.map((function(e,n){return[Xe(Xe(Xe({},e),e.children&&a&&{isOpen:!!e.isOpen}),{},{cells:Je(e,t,i),actionProps:{"data-ouia-component-id":"".concat(e.id,"-actions-kebab")}}),e.children&&a&&{cells:[{title:"function"==typeof e.children?e.children():e.children}],parent:2*n,fullWidth:!0}]}))).filter(Boolean)},$e=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(null==e||null===(t=e.chips)||void 0===t?void 0:t[0])||{},a=r.value;return n.filter((function(e){return e!==a}))},Qe=function(e){return null==e?void 0:e.reduce((function(e,t){return e||t.toString().includes("onSort:")}),!1)};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tt={textFilter:""},nt="TEXT_FILTER",rt=function(e,t){var n=t.type,r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n===nt&&{textFilter:r})},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[tt],t=(0,j.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)(""),o=(0,j.Z)(a,2),l=o[0],s=o[1],c=r?n.textFilter:l,u=r?function(e){return r({type:nt,payload:e})}:s,p={label:"Name",value:"name-filter",filterValues:{placeholder:"Filter by name",value:c,onChange:function(e,t){return u(t)}}},d=c.length>0?[{category:"Display name",type:Z.TEXTUAL_CHIP,chips:[{name:c}]}]:[];return[p,d,c,u]},ot=["label"];function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st={stalenessFilter:[]},ct="STALENESS_FILTER",ut=function(e,t){var n=t.type,r=t.payload;return lt({},n===ct&&{stalenessFilter:r})},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[st],t=(0,j.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)([]),o=(0,j.Z)(a,2),l=o[0],s=o[1],c=r?n.stalenessFilter:l,u=r?function(e){return r({type:ct,payload:e})}:s,p={label:"Status",value:"stale-status",type:"checkbox",filterValues:{value:c,onChange:function(e,t){return u(t)},items:Z.staleness}},d=(null==c?void 0:c.length)>0?[{category:"Status",type:Z.STALE_CHIP,chips:Z.staleness.filter((function(e){var t=e.value;return c.includes(t)})).map((function(e){return lt({name:e.label},(0,S.Z)(e,ot))}))}]:[];return[p,d,c,u]},dt=["label"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt={registeredWithFilter:[]},vt="REGISTERED_WITH_FILTER",yt=function(e,t){var n=t.type,r=t.payload;return mt({},n===vt&&{registeredWithFilter:r})},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[gt],t=(0,j.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)([]),o=(0,j.Z)(a,2),l=o[0],s=o[1],c=r?n.registeredWithFilter:l,u=r?function(e){return r({type:vt,payload:e})}:s,p={label:"Source",value:"source-registered-with",type:"checkbox",filterValues:{value:c,onChange:function(e,t){return u(t)},items:Z.registered}},d=(null==c?void 0:c.length)>0?[{category:"Source",type:Z.REGISTERED_CHIP,chips:Z.registered.filter((function(e){var t=e.value;return c.includes(t)})).map((function(e){return mt({name:e.label},(0,S.Z)(e,dt))}))}]:[];return[p,d,c,u]};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=(0,Le.YM)(e,t,n,r,a,"system"),i=o.filter,l=o.chips,s=o.selectedTags,c=o.setValue,u=o.filterTagsBy,p=o.seFilterTagsBy;return{tagsFilter:{label:"Tags",value:"tags",type:"group",placeholder:"Filter system by tag",filterValues:Et({},i)},tagsChip:l,selectedTags:s,setSelectedTags:c,filterTagsBy:u,seFilterTagsBy:p}},wt=n(98436);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pt={operatingSystemFilter:[]},St="OPERATING_SYSTEM_FILTER",Dt=function(e,t){var n=t.type,r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n===St&&{operatingSystemFilter:r})},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Pt],t=(0,j.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)([]),o=(0,j.Z)(a,2),l=o[0],s=o[1],c=r?n.operatingSystemFilter:l,u=r?function(e){return r({type:St,payload:e})}:s,p=(0,wt.Zf)({value:c,onChange:function(e,t){return u(t)}}),d=(0,wt.VT)(c);return[p,d,c,u]};function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=function(e){return function(t,n){return e.reduce((function(e,r){return Ft(Ft({},e),null==r?void 0:r(t,n))}),t)}},It=["total","page","perPage","filterConfig","hasItems","children","actionsConfig","activeFiltersConfig","showTags","getTags","items","sortBy","customFilters","hasAccess","bulkSelect","hideFilters","paginationProps","onRefreshData","loaded","showTagModal"];function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt=function(e){var t,n=e.total,r=e.page,s=e.perPage,u=e.filterConfig,p=e.hasItems,f=e.children,m=e.actionsConfig,g=e.activeFiltersConfig,v=e.showTags,y=e.getTags,h=e.items,b=e.sortBy,E=e.customFilters,O=e.hasAccess,w=e.bulkSelect,T=e.hideFilters,P=e.paginationProps,k=e.onRefreshData,I=e.loaded,R=e.showTagModal,C=(0,S.Z)(e,It),L=(0,c.useDispatch)(),_=(0,i.useReducer)(kt([rt,ut,yt,Le.sr,Dt]),Ct(Ct(Ct(Ct(Ct({},tt),st),gt),Le.Yn),Pt)),W=(0,c.useSelector)((function(e){return e.entities.activeFilters})),B=(0,c.useSelector)((function(e){return e.entities.allTagsLoaded})),A=(0,c.useSelector)((function(e){return e.entities.allTags})),N=(0,c.useSelector)((function(e){return e.entities.additionalTagsCount})),x=at(_),z=(0,j.Z)(x,4),H=z[0],U=z[1],M=z[2],V=z[3],G=pt(_),K=(0,j.Z)(G,4),q=K[0],X=K[1],J=K[2],Y=K[3],$=ht(_),Q=(0,j.Z)($,4),ee=Q[0],te=Q[1],ne=Q[2],re=Q[3],ae=jt(_),oe=(0,j.Z)(ae,4),ie=oe[0],le=oe[1],se=oe[2],ce=oe[3],ue=Ot(A,B,N,(function(){return L((0,d.Ar)(!0))}),_),pe=ue.tagsFilter,de=ue.tagsChip,fe=ue.selectedTags,me=ue.setSelectedTags,ge=ue.filterTagsBy,ve=ue.seFilterTagsBy,ye=(0,i.useCallback)(Ne()((function(e,t){v&&!p&&O&&L((0,d.C8)(e,Ct(Ct({},E),t),y))}),800),[null==E?void 0:E.tags]),he=(0,i.useCallback)((function(e){O&&(k(e),v&&!p&&L((0,d.C8)(ge,Ct(Ct({},E),{},{filters:(null==e?void 0:e.filters)||W}),y)))}),[null==E?void 0:E.tags]),be={name:!(T.all&&!1!==T.name||T.name),stale:!(T.all&&!1!==T.stale||T.stale),registeredWith:!(T.all&&!1!==T.registeredWith||T.registeredWith),operatingSystem:!(T.all&&!1!==T.operatingSystem||T.operatingSystem),tags:!(T.all&&!1!==T.tags||T.tags)},Ee=function(e){O&&he(e)},Oe=(0,i.useCallback)(Ne()((function(e){return Ee(e)}),800),[null==b?void 0:b.key,null==b?void 0:b.direction]);(0,i.useEffect)((function(){var e=(0,Z.reduceFilters)(W),t=e.textFilter,n=e.tagFilters,r=e.staleFilter,a=e.registeredWithFilter,o=e.osFilter;Oe(),be.name&&V(t),be.stale&&Y(r),be.registeredWith&&re(a),be.tags&&me(n),be.operatingSystem&&ce(o)}),[]);var we=function(e,t,n){var r=[].concat((0,D.Z)(null==W?void 0:W.filter((function(e){return!Object.prototype.hasOwnProperty.call(e,t)}))),[(0,o.Z)({},t,e)]);n({page:1,perPage:s,filters:r})},Te=r&&s&&W&&(!p||h);(0,i.useEffect)((function(){Te&&v&&be.tags&&ye(ge,{filters:W})}),[ge,null==E?void 0:E.tags]),(0,i.useEffect)((function(){Te&&be.name&&function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.trim(),r=null==W?void 0:W.find((function(e){return e.value===Z.TEXT_FILTER}));r?r.filter=n:null==W||W.push({value:Z.TEXT_FILTER,filter:n}),(t?Oe:Ee)({page:1,perPage:s,filters:W})}(M,!0)}),[M]),(0,i.useEffect)((function(){Te&&be.stale&&we(J,"staleFilter",Oe)}),[J]),(0,i.useEffect)((function(){Te&&be.registeredWith&&we(ne,"registeredWithFilter",Oe)}),[ne]),(0,i.useEffect)((function(){Te&&v&&be.tags&&we((0,_e.Nc)(fe),"tagFilters",Oe)}),[fe]),(0,i.useEffect)((function(){Te&&be.operatingSystem&&we(se,"osFilter",Oe)}),[se]);var Pe,Se=(t={},(0,o.Z)(t,Z.TEXTUAL_CHIP,(function(){return V("")})),(0,o.Z)(t,Z.TAG_CHIP,(function(e){return me(function(e,t,n){var r,a,o=null==e||null===(r=e.chips)||void 0===r?void 0:r[0];return void 0!==(null==t||null===(a=t[null==e?void 0:e.key])||void 0===a?void 0:a[null==o?void 0:o.key])&&(t[null==e?void 0:e.key][null==o?void 0:o.key]=!1),n&&n(t),t}(e,fe,(function(e){return we((0,_e.Nc)(e),"tagFilters",Ee)})))})),(0,o.Z)(t,Z.STALE_CHIP,(function(e){return Y($e(e,J))})),(0,o.Z)(t,Z.REGISTERED_CHIP,(function(e){return re($e(e,ne))})),(0,o.Z)(t,Z.OS_CHIP,(function(e){return ce(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=((null==e||null===(t=e.chips)||void 0===t?void 0:t[0])||{}).value,a="".concat(r.split(".")[0],".0");return Xe(Xe({},n),{},(0,o.Z)({},a,Object.keys(n[a]).reduce((function(e,t){return t!==r&&(e[t]=!0),e}),{})))}(e,se))})),t),De=[].concat((0,D.Z)(p?[]:[].concat((0,D.Z)(be.name?[H]:[]),(0,D.Z)(be.stale?[q]:[]),(0,D.Z)(be.operatingSystem?[ie]:[]),(0,D.Z)(be.registeredWith?[ee]:[]),(0,D.Z)(v&&be.tags?[pe]:[]))),(0,D.Z)((null==u?void 0:u.items)||[]));return l().createElement(i.Fragment,null,l().createElement(We.Z,(0,a.Z)({},C,w&&{bulkSelect:Ct(Ct({},w),{},{isDisabled:(null==w?void 0:w.isDisabled)||!O})},{className:"ins-c-inventory__table--toolbar ".concat(p||!De.length?"ins-c-inventory__table--toolbar-has-items":"")},(null==De?void 0:De.length)>0&&{filterConfig:Ct(Ct({},u||{}),{},{isDisabled:!O,items:null==De?void 0:De.map((function(e){var t,n;return Ct(Ct({},e),{},{filterValues:Ct(Ct({placeholder:(null==e||null===(t=e.filterValues)||void 0===t?void 0:t.placeholder)||"Filter by ".concat(null==e||null===(n=e.label)||void 0===n?void 0:n.toLowerCase())},null==e?void 0:e.filterValues),{},{isDisabled:!O})})}))})},(M.length>0||ze()(Object.values(fe),(function(e){return Object.values(e).filter(Boolean)})).filter(Boolean).length>0||(null==J?void 0:J.length)>0||(null==ne?void 0:ne.length)>0||(null==se?void 0:se.length)>0||(null==g||null===(Pe=g.filters)||void 0===Pe?void 0:Pe.length)>0)&&O&&{activeFiltersConfig:Ct(Ct({},g||{}),{},{filters:[].concat((0,D.Z)(v&&!p&&be.tags?de:[]),(0,D.Z)(!p&&be.name?U:[]),(0,D.Z)(!p&&be.stale?X:[]),(0,D.Z)(!p&&be.registeredWith?te:[]),(0,D.Z)(!p&&be.operatingSystem?le:[]),(0,D.Z)((null==g?void 0:g.filters)||[])),onDelete:function(e,t,n){var r,a=(0,Ce.Z)(t),o=a[0],i=a.slice(1);n?(Ee({page:1,filters:[]}),L((0,d.K5)()),be.name&&V(""),be.tags&&me({})):null===(r=Se[o.type])||void 0===r||r.call(Se,o),g&&g.onDelete&&g.onDelete(e,[o].concat((0,D.Z)(i)),n,Be.js)}})},{actionsConfig:I?m:null,pagination:I?Ct({page:r,itemCount:O?n:0,isDisabled:!O,perPage:s,onSetPage:function(e,t){return k({page:t})},onPerPageSelect:function(e,t){return k({page:1,per_page:t})}},P):l().createElement(F.Z,{size:F.i.lg})}),f),(v||be.tags||R)&&l().createElement(Z.TagsModal,{customFilters:E,filterTagsBy:ge,onApply:function(e){return me((0,Z.arrayToSelection)(e))},onToggleModal:function(){return ve("")},getTags:y}))};Lt.propTypes={showTags:p().bool,getTags:p().func,hasAccess:p().bool,filterConfig:We.Z.propTypes.filterConfig,total:p().number,filters:p().array,hasItems:p().bool,page:p().number,onClearFilters:p().func,toggleTagModal:p().func,perPage:p().number,children:p().node,pagination:We.Z.propTypes.pagination,actionsConfig:We.Z.propTypes.actionsConfig,activeFiltersConfig:We.Z.propTypes.activeFiltersConfig,onRefreshData:p().func,customFilters:p().shape({tags:p().oneOfType([p().object,p().arrayOf(p().string)])}),hideFilters:p().shape({tags:p().bool,name:p().bool,registeredWith:p().bool,stale:p().bool,operatingSystem:p().bool,all:p().bool}),paginationProps:p().object,loaded:p().bool,onRefresh:p().func,hasCheckbox:p().bool,isLoaded:p().bool,items:p().array,sortBy:p().object,bulkSelect:p().object,showTagModal:p().bool,disableDefaultColumns:p().any},Lt.defaultProps={showTags:!1,hasAccess:!0,activeFiltersConfig:{},filters:[],hideFilters:{}};const _t=Lt;var Wt=n(65550),Bt=n(2443),At=n(1284),Nt=n(81739);const xt=function(){return l().createElement(f.u,{variant:f.I.full},l().createElement(v.D,{headingLevel:"h5",size:"lg"},"No matching systems found"),l().createElement(g.B,null,"To continue, edit your filter settings and search again."))};var zt,Ht=n(21216);function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=function(e){var t,n,r=e.hasItems,o=e.expandable,u=e.onExpandClick,p=e.hasCheckbox,f=e.actions,m=e.variant,g=e.sortBy,v=e.tableProps,y=e.onSort,h=e.expandable,b=e.onRowClick,E=e.noDetail,O=e.noSystemsTable,w=void 0===O?l().createElement(xt,null):O,T=e.showTags,P=e.columns,j=e.disableDefaultColumns,Z=e.loaded,F=e.columnsCounter,k=(0,c.useDispatch)(),I=(0,s.useHistory)(),R=(0,s.useLocation)(),C=(0,c.useSelector)((function(e){return e.entities.rows})),L=(0,c.useSelector)((function(e){return e.entities.columns}),(function(e,t){return e.every((function(e,n){var r=e.key;return t.findIndex((function(e){return e.key===r}))===n}))})),_=(0,i.useRef)([]);(0,i.useMemo)((function(){if("function"==typeof P)_.current=P(Ht.y5);else if(P){var e=Array.isArray(j)?j:[],t=Ht.y5.filter((function(t){var n=t.key;return"tags"===n&&T||"tags"!==n&&!e.includes(n)}));_.current=(0,At.mergeArraysByKey)(["boolean"==typeof j&&j?[]:t,P],"key")}else _.current=L}),[T,Array.isArray(j)?j.join():j,Array.isArray(P)?P.map((function(e){return e.key})).join():"function"==typeof P?"function":P,Array.isArray(L)?L.map((function(e){return e.key})).join():L,F]);var W=Z&&function(e,t,n,r){return null==e?void 0:e.map((function(e){var a=e.props,o=e.transforms,i=e.cellFormatters;return Xe(Xe({},(0,S.Z)(e,Ke)),{},{transforms:[].concat((0,D.Z)(o||[]),(0,D.Z)(null!=a&&a.width?[(0,He.cellWidth)(a.width)]:[]),(0,D.Z)(t||n.length<=0||a&&a.isStatic||null!=o&&o.includes(He.sortable)||Qe(o)?[]:[He.sortable])),cellFormatters:[].concat((0,D.Z)(i||[]),(0,D.Z)(r?[He.expandable]:[]))})}))}(_.current,r,C,h);return delete v.RowWrapper,0===(null==C?void 0:C.length)&&delete v.actionResolver,l().createElement(l().Fragment,null,Z&&W?He.Table&&l().createElement(He.Table,(0,a.Z)({variant:m,"aria-label":"Host inventory",cells:W,rows:Ye(C,_.current,{actions:f,expandable:o,loaded:Z,onRowClick:b||function(e,t){I.push("".concat(R.pathname).concat("/"===R.pathname.slice(-1)?"":"/").concat(t))},noDetail:E,sortBy:g,noSystemsTable:w}),gridBreakPoint:(null===(t=_.current)||void 0===t?void 0:t.length)>5?He.TableGridBreakpoint.gridLg:He.TableGridBreakpoint.gridMd,className:"ins-c-entity-table",onSort:function(e,t,n){var r;!function(e,t,n,r){"action"!==t&&"health"!==t&&k((0,d.HD)({index:r,key:t,direction:n})),null==y||y({index:r,key:t,direction:n})}(0,null==W||null===(r=W[t-Boolean(p)-Boolean(o)])||void 0===r?void 0:r.key,n,t)},sortBy:{index:(null==W?void 0:W.findIndex((function(e){return(null==g?void 0:g.key)===e.key})))+Boolean(p)+Boolean(o),direction:null==g?void 0:g.direction}},Mt(Mt(Mt({},p&&0!==(null==C?void 0:C.length)?{onSelect:function(e,t,n){var r=h?C[n/2]:C[n];k((0,d.CL)(-1===n?0:r.id,t))}}:{}),o?{onCollapse:u}:{}),f&&(null==C?void 0:C.length)>0&&{actions:f}),{isStickyHeader:!0},v),l().createElement(He.TableHeader,null),l().createElement(He.TableBody,null)):l().createElement(Nt.Z,{colSize:(null===(n=_.current)||void 0===n?void 0:n.length)||3,rowSize:15,variant:null!=m?m:v.variant}))};Vt.propTypes={variant:p().oneOf(["compact"]),expandable:p().bool,onExpandClick:p().func,onSort:p().func,hasCheckbox:p().bool,showActions:p().bool,hasItems:p().bool,showHealth:p().bool,sortBy:p().shape({key:p().string,direction:p().oneOf(["asc","desc"])}),tableProps:p().shape((zt={},(0,o.Z)(zt,p().string,p().any),(0,o.Z)(zt,"RowWrapper",p().elementType),(0,o.Z)(zt,"variant",p().string),(0,o.Z)(zt,"actionResolver",p().func),zt)),onRowClick:p().func,showTags:p().bool,noSystemsTable:p().node,disableDefaultColumns:p().oneOfType([p().bool,p().arrayOf(p().string)]),loaded:p().bool,columnsCounter:p().number,columns:p().oneOfType([p().array,p().func]),isLoaded:p().bool,actions:p().array,noDetail:p().any},Vt.defaultProps={loaded:!1,showHealth:!1,expandable:!1,hasCheckbox:!0,showActions:!1,rows:[],variant:He.TableVariant.compact,onExpandClick:function(){},tableProps:{}};const Gt=Vt;var Kt=n(18446),qt=n.n(Kt),Xt=n(85333),Jt=n(35224),Yt=["title","description"],$t=function(e){var t=e.title,n=e.description,r=(0,S.Z)(e,Yt);return l().createElement(Xt.Z,(0,a.Z)({},r,{className:"ins-c-inventory__no--access",title:t,description:l().createElement(Jt.u,{content:"inventory:*:read"},n)}))};$t.propTypes={title:p().string,description:p().node},$t.defaultProps={title:"You do not have access to Inventory",description:l().createElement("div",null,"To view your systems, you must be granted inventory access from your Organization Administrator.")};const Qt=$t;var en=["children","isOpen"],tn=["showHealth","onRefreshData","ignoreRefresh"],nn=["hasAccess","onRefreshData"];function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on=function(e){return e.children,e.isOpen,(0,S.Z)(e,en)},ln=function(e){e.showHealth;var t=e.onRefreshData,n=e.ignoreRefresh,r=(0,S.Z)(e,tn),o=(0,i.useRef)(r.items),s=(0,i.useRef)(r.sortBy);return(0,i.useEffect)((function(){r.hasItems&&t({},n)}),[]),(0,i.useEffect)((function(){r.hasItems&&!qt()(o.current.map(on),r.items.map(on))&&(o.current=r.items,t({},n)),r.hasItems||qt()(s.current,r.sortBy)||(s.current=r.sortBy,t({},n))})),l().createElement(z.r,{gutter:"sm",className:"ins-inventory-list"},l().createElement(H.P,{span:12},l().createElement(Gt,(0,a.Z)({},r,{onRefreshData:t}))))},sn=l().forwardRef((function(e,t){var n=e.hasAccess,r=e.onRefreshData,o=(0,S.Z)(e,nn),i=(0,c.useSelector)((function(e){return e.entities.activeFilters}));return t&&(t.current={onRefreshData:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(e,t)}}),n?l().createElement(ln,(0,a.Z)({},o,{activeFilters:i,onRefreshData:r})):l().createElement("div",{className:"ins-c-inventory__no-access"},l().createElement(Qt,{showReturnButton:!1}))}));ln.propTypes=an(an({},sn.propTypes),{},{setRefresh:p().func,onRefreshData:p().func,ignoreRefresh:p().bool}),ln.defaultProps={perPage:50,page:1,ignoreRefresh:!0},sn.propTypes={showTags:p().bool,filterEntities:p().func,loadEntities:p().func,showHealth:p().bool,page:p().number,perPage:p().number,sortBy:p().shape({key:p().string,direction:p().string}),items:p().arrayOf(p().oneOfType([p().string,p().shape({id:p().string.isRequired}),p().shape({account:p().any,isOpen:p().bool,title:p().node})])),entities:p().arrayOf(p().any),customFilters:p().shape({tags:p().oneOfType([p().object,p().arrayOf(p().string)])}),getEntities:p().func,hideFilters:p().shape({tags:p().bool,name:p().bool,registeredWith:p().bool,stale:p().bool,operatingSystem:p().bool}),onRefreshData:p().func},sn.defaultProps={hasAccess:!0};const cn=sn;var un=n(71070),pn=function(e){var t=e.total,n=e.page,r=e.perPage,o=e.direction,i=e.isFull,s=e.hasAccess,c=e.paginationProps,u=e.onRefreshData;return e.loaded||!s?l().createElement(un.t,(0,a.Z)({},i&&{variant:un.a.bottom},{isDisabled:!s,itemCount:t,page:n,perPage:r,dropDirection:o,onSetPage:function(e,t){return u({page:t})},onPerPageSelect:function(e,t){return u({page:1,per_page:t})}},c)):null};pn.propTypes={perPage:p().number,total:p().number,page:p().number,isFull:p().bool,hasAccess:p().bool,direction:p().string,paginationProps:p().object,loaded:p().bool,onRefreshData:p().func.isRequired},pn.defaultProps={total:0,isFull:!1,direction:"up",hasAccess:!0};const dn=pn;var fn=["onRefresh","children","inventoryRef","items","total","page","perPage","filters","showTags","sortBy","customFilters","hasAccess","isFullView","getEntities","getTags","hideFilters","paginationProps","errorState","autoRefresh","isLoaded","initialLoading","ignoreRefresh","showTagModal"];function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=(0,i.forwardRef)((function(e,t){var n=e.onRefresh,r=e.children,o=(e.inventoryRef,e.items),s=e.total,u=e.page,p=e.perPage,f=e.filters,m=e.showTags,g=e.sortBy,v=e.customFilters,y=e.hasAccess,h=void 0===y||y,b=e.isFullView,E=void 0!==b&&b,O=e.getEntities,w=e.getTags,T=e.hideFilters,P=e.paginationProps,D=e.errorState,F=void 0===D?l().createElement(Bt.Z,null):D,k=e.autoRefresh,I=e.isLoaded,R=e.initialLoading,C=e.ignoreRefresh,L=e.showTagModal,_=(0,S.Z)(e,fn),W=Boolean(o),B=(0,c.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.error})),A=(0,c.useSelector)((function(e){var t=e.entities.page;return W?u:t||1}),c.shallowEqual),N=(0,c.useSelector)((function(e){var t=e.entities.perPage;return W?p:t||50}),c.shallowEqual),x={page:A,perPage:N,total:(0,c.useSelector)((function(e){var t=e.entities.total;return W?void 0!==s?s:null==o?void 0:o.length:t}),c.shallowEqual)},z=(0,c.useSelector)((function(e){var t=e.entities.sortBy;return W?g:t}),c.shallowEqual),H=(0,c.useSelector)((function(e){var t=e.entities;return W&&void 0!==I?I&&(null==t?void 0:t.loaded):null==t?void 0:t.loaded})),U=(0,i.useState)(R),M=(0,j.Z)(U,2),V=M[0],G=M[1];(0,i.useEffect)((function(){H||G()}),[H]);var K=H&&!V,q=(0,c.useDispatch)(),X=(0,c.useStore)(),J=(0,i.useRef)(function(){var e={};return{updateProps:function(t){e=t},getProps:function(){return e}}}());J.current.updateProps({page:A,perPage:N,items:o,sortBy:z,hideFilters:T,showTags:m,getEntities:O,customFilters:v,hasItems:W});var Y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,a=X.getState().entities.activeFilters,o=(null===(e=J.current)||void 0===e?void 0:e.getProps())||{},i=(null==t?void 0:t.per_page)||(null==t?void 0:t.perPage)||o.perPage,l=gn(gn({page:o.page,per_page:i,items:o.items,sortBy:o.sortBy,hideFilters:o.hideFilters,filters:a,hasItems:o.hasItems},o.customFilters),t);n&&!r?(q((0,d.nE)()),n(l,(function(e){q((0,Z.loadSystems)(gn(gn({},l),e),o.showTags,o.getEntities))}))):q((0,Z.loadSystems)(l,o.showTags,o.getEntities))},$=(0,i.useRef)(v);return(0,i.useEffect)((function(){k&&!qt()($.current,v)&&(Y({page:1}),$.current=v)})),!1===h&&E?l().createElement(Qt,{title:"This application requires Inventory permissions",description:l().createElement("div",null,"To view the content of this page, you must be granted a minimum of inventory permissions from your Organization Administrator.")}):B?F:l().createElement(i.Fragment,null,l().createElement(_t,(0,a.Z)({},_,{customFilters:v,hasAccess:h,items:o,filters:f,hasItems:W,total:x.total,page:x.page,perPage:x.perPage,showTags:m,getTags:w,onRefreshData:Y,sortBy:z,hideFilters:T,paginationProps:P,loaded:K,showTagModal:L,activeFiltersConfig:gn({deleteTitle:"Reset filters"},_.activeFiltersConfig)}),r),l().createElement(cn,(0,a.Z)({},_,{customFilters:v,hasAccess:h,ref:t,hasItems:W,items:o,page:x.page,sortBy:z,perPage:x.perPage,showTags:m,onRefreshData:Y,loaded:K,ignoreRefresh:C})),l().createElement(Wt.Z,{isFooter:!0,className:"ins-c-inventory__table--toolbar"},l().createElement(dn,{hasAccess:h,isFull:!0,total:x.total,page:x.page,perPage:x.perPage,hasItems:W,onRefreshData:Y,paginationProps:P,loaded:K})))}));vn.propTypes={autoRefresh:p().bool,onRefresh:p().func,children:p().node,inventoryRef:p().object,items:p().array,total:p().number,page:p().number,perPage:p().number,filters:p().any,showTags:p().bool,getTags:p().func,sortBy:p().object,customFilters:p().any,hasAccess:p().bool,isFullView:p().bool,getEntities:p().func,hideFilters:p().object,paginationProps:p().object,errorState:p().node,isLoaded:p().bool,initialLoading:p().bool,ignoreRefresh:p().bool,showTagModal:p().bool,activeFiltersConfig:p().object};const yn=vn;var hn=n(43707),bn=n(2372),En=["showInventoryDrawer","isRbacEnabled"],On=function(e){var t=e.showInventoryDrawer,n=e.isRbacEnabled,r=(0,S.Z)(e,En),a=(0,hn.T)("inventory",["inventory:*:*","inventory:*:read","inventory:hosts:read"],!0).hasAccess;return void 0===a?l().createElement(bn.$,null):n&&!1===a?l().createElement(Qt,null):t?l().createElement(ke,r):l().createElement(l().Fragment,r)};On.propTypes={showInventoryDrawer:p().bool,isRbacEnabled:p().bool},On.defaultProps={showInventoryDrawer:!1};const wn=On;function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Boolean(n);return Pn({InventoryTable:l().forwardRef((function(t,n){return l().createElement(Ie.Z,(0,a.Z)({},t,{isRbacEnabled:o,inventoryRef:n,store:e,cmp:yn}))})),AppInfo:l().forwardRef((function(n,r){return l().createElement(Ie.Z,(0,a.Z)({hideLoader:!0},n,t,{isRbacEnabled:o,inventoryRef:r,store:e,cmp:oe}))})),InventoryDetailHead:l().forwardRef((function(n,r){return l().createElement(Ie.Z,(0,a.Z)({hideLoader:!0},n,t,{isRbacEnabled:o,inventoryRef:r,store:e,showInventoryDrawer:i&&!n.hideInvDrawer,cmp:re}))})),InventoryDetail:l().forwardRef((function(n,r){return l().createElement(Ie.Z,(0,a.Z)({hideLoader:!0},n,t,{isRbacEnabled:o,inventoryRef:r,store:e,showInventoryDrawer:i,cmp:ie}))})),TagWithDialog:l().forwardRef((function(t,n){return l().createElement(Ie.Z,(0,a.Z)({},t,{inventoryRef:n,isRbacEnabled:o,store:e,cmp:Re.Z}))})),DetailWrapper:function(e){return l().createElement(wn,(0,a.Z)({Wrapper:n,isRbacEnabled:o,showInventoryDrawer:i},e))}},r)}}}]);
//# sourceMappingURL=../sourcemaps/9379.afcb03655e0fc19b1393e06aa6abb5c3.js.map