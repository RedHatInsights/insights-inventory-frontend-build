{"version":3,"sources":["webpack:///./src/routes/InventoryDetail.js"],"names":["Inventory","entity","currentApp","clearNotifications","store","useStore","history","useHistory","getRegistry","useContext","RegistryContext","useSelector","permissionsReducer","loading","writePermissions","shallowEqual","useEffect","insights","chrome","hideGlobalFilter","appAction","splitUrl","window","location","href","split","length","additionalClasses","document","title","display_name","appObjectId","id","hideInvLink","showTags","onLoad","mergeWithDetail","INVENTORY_ACTION_TYPES","register","entitesDetailReducer","className","classnames","ouiaId","Link","to","routes","isActive","size","SkeletonSize","fallback","hideBack","showDelete","hideInvDrawer","gutter","span","contextTypes","PropTypes","propTypes","loadEntity","routerParams","connect","entityDetails","activeApp","appName","firstApp","activeApps","name","dispatch","actions"],"mappings":"oZAiBMA,EAAY,SAAC,GAA+C,IAA7CC,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,WAAYC,EAAyB,EAAzBA,mBAC/BC,GAAQC,gBACRC,GAAUC,kBACRC,GAAgBC,gBAAWC,MAA3BF,YACR,GAAsCG,kBAClC,gBAAGC,EAAH,EAAGA,mBAAH,MACK,CAAEC,QAASD,aAAF,EAAEA,EAAoBC,QAASC,iBAAkBF,aAAF,EAAEA,EAAoBE,oBACnFC,gBAHIF,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,kBAMjBE,gBAAU,WAAM,QACZ,UAAAC,SAASC,cAAT,mBAAiBC,wBAAjB,iBAAoC,GACpCF,SAASC,OAAOE,UAAU,iBAC1BjB,IAKA,IAAMkB,EAAWC,OAAOC,SAASC,KAAKC,MAAM,aACpB,IAApBJ,EAASK,SACTJ,OAAOC,SAAP,UAAqBF,EAAS,GAA9B,oBAA4CA,EAAS,OAE1D,IAEH,IAAMM,EAAoB,CACtB,wCAAyCzB,GAA6B,wBAAfA,GAW3D,OARID,IACA2B,SAASC,MAAT,UAAoB5B,EAAO6B,aAA3B,qCAGJd,gBAAU,WAAM,UACJ,QAAR,EAAAC,gBAAA,mBAAUC,cAAV,mBAAkBa,mBAAlB,gBAAgC9B,aAAhC,EAAgCA,EAAQ+B,MACzC,CAAC/B,aAAD,EAACA,EAAQ+B,KAGR,kBAAC,UAAD,CACIC,aAAW,EACXC,UAAQ,EACR9B,MAAOA,EACPE,QAASA,EACT6B,OAAQ,YAAiD,IAA9CC,EAA8C,EAA9CA,gBAAiBC,EAA6B,EAA7BA,uBACxB7B,IAAc8B,SAASF,GAAgBG,QAAqBF,OAGhE,kBAAC,IAAD,CAAYG,UAAWC,IAAW,kCAAmCd,IACjE,kBAAC,IAAD,CAAYe,OAAO,gBACf,kBAAC,IAAD,KACI,kBAAC,EAAAC,KAAD,CAAMC,GAAIC,WAAV,cAEJ,kBAAC,IAAD,CAAgBC,UAAQ,GACpB,yBAAKN,UAAU,4CAEPvC,EACIA,EAAO6B,aACP,kBAAC,IAAD,CAAUiB,KAAMC,aAM/BnC,GAAW,kBAAC,UAAD,CACRT,MAAOA,EACPE,QAASA,EACT2C,SAAS,GACTC,UAAQ,EACRhB,UAAQ,EACRD,aAAW,EACXkB,WAAYrC,EACZsC,eAAa,KAIzB,kBAAC,IAAD,CAAMZ,UAAWC,IAAWd,IACxB,kBAAC,IAAD,CAAM0B,OAAO,MACT,kBAAC,IAAD,CAAUC,KAAM,IACZ,kBAAC,UAAD,CACIpB,UAAQ,EACRe,SAAS,GACT7C,MAAOA,EACPE,QAASA,SASrCN,EAAUuD,aAAe,CACrBnD,MAAOoD,YAGXxD,EAAUyD,UAAY,CAClBnD,QAASkD,WACTvD,OAAQuD,WACRE,WAAYF,SACZrD,mBAAoBqD,SACpBtD,WAAYsD,YAkBhB,SAAeG,QAAaC,cAf5B,YAA4C,IAAjBC,EAAiB,EAAjBA,cACjBC,EAAYD,GAAiBA,EAAcC,WAAaD,EAAcC,UAAUC,QAChFC,EAAWH,GAAiBA,EAAcI,YAAcJ,EAAcI,WAAW,GACvF,MAAO,CACHhE,OAAQ4D,GAAiBA,EAAc5D,OACvCC,WAAY4D,GAAcE,GAAYA,EAASE,SAIvD,SAA4BC,GACxB,MAAO,CACHhE,mBAAoB,kBAAMgE,EAASC,YAIfR,CAA6C5D","file":"js/28.8e07d21a6aaedd325cb0.js","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector, shallowEqual, useStore } from 'react-redux';\nimport './inventory.scss';\nimport { Link, useHistory } from 'react-router-dom';\nimport { entitesDetailReducer, RegistryContext } from '../store';\nimport * as actions from '../store/actions';\nimport { Grid, GridItem } from '@patternfly/react-core';\nimport { Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { Skeleton, SkeletonSize, PageHeader, Main } from '@redhat-cloud-services/frontend-components';\nimport classnames from 'classnames';\nimport { routes } from '../Routes';\nimport InventoryDetailHead from '../modules/InventoryDetailHead';\nimport AppInfo from '../modules/AppInfo';\nimport DetailWrapper from '../modules/DetailWrapper';\n\nconst Inventory = ({ entity, currentApp, clearNotifications }) => {\n    const store = useStore();\n    const history = useHistory();\n    const { getRegistry } = useContext(RegistryContext);\n    const { loading, writePermissions } = useSelector(\n        ({ permissionsReducer }) =>\n            ({ loading: permissionsReducer?.loading, writePermissions: permissionsReducer?.writePermissions }),\n        shallowEqual\n    );\n\n    useEffect(() => {\n        insights.chrome?.hideGlobalFilter?.(true);\n        insights.chrome.appAction('system-detail');\n        clearNotifications();\n\n        // BZ: RHEL cockpit is linking to crc/insights/inventory/{}/insights\n        // which results in a page error, catch that and redirect\n        // TODO Remove me when BZ is fixed\n        const splitUrl = window.location.href.split('/insights');\n        if (splitUrl.length === 3) {\n            window.location = `${splitUrl[0]}/insights${splitUrl[1]}`;\n        }\n    }, []);\n\n    const additionalClasses = {\n        'ins-c-inventory__detail--general-info': currentApp && currentApp === 'general_information'\n    };\n\n    if (entity) {\n        document.title = `${entity.display_name} | Inventory | Red Hat Insights`;\n    }\n\n    useEffect(() => {\n        insights?.chrome?.appObjectId?.(entity?.id);\n    }, [entity?.id]);\n\n    return (\n        <DetailWrapper\n            hideInvLink\n            showTags\n            store={store}\n            history={history}\n            onLoad={({ mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                getRegistry().register(mergeWithDetail(entitesDetailReducer(INVENTORY_ACTION_TYPES)));\n            }}\n        >\n            <PageHeader className={classnames('pf-m-light ins-inventory-detail', additionalClasses)} >\n                <Breadcrumb ouiaId=\"systems-list\">\n                    <BreadcrumbItem>\n                        <Link to={routes.table}>Inventory</Link>\n                    </BreadcrumbItem>\n                    <BreadcrumbItem isActive>\n                        <div className=\"ins-c-inventory__detail--breadcrumb-name\">\n                            {\n                                entity ?\n                                    entity.display_name :\n                                    <Skeleton size={SkeletonSize.xs} />\n                            }\n                        </div>\n                    </BreadcrumbItem>\n                </Breadcrumb>\n                {\n                    !loading && <InventoryDetailHead\n                        store={store}\n                        history={history}\n                        fallback=\"\"\n                        hideBack\n                        showTags\n                        hideInvLink\n                        showDelete={writePermissions}\n                        hideInvDrawer\n                    />\n                }\n            </PageHeader>\n            <Main className={classnames(additionalClasses)}>\n                <Grid gutter=\"md\">\n                    <GridItem span={12}>\n                        <AppInfo\n                            showTags\n                            fallback=\"\"\n                            store={store}\n                            history={history}\n                        />\n                    </GridItem>\n                </Grid>\n            </Main>\n        </DetailWrapper>\n    );\n};\n\nInventory.contextTypes = {\n    store: PropTypes.object\n};\n\nInventory.propTypes = {\n    history: PropTypes.object,\n    entity: PropTypes.object,\n    loadEntity: PropTypes.func,\n    clearNotifications: PropTypes.func,\n    currentApp: PropTypes.string\n};\n\nfunction mapStateToProps({ entityDetails }) {\n    const activeApp = entityDetails && entityDetails.activeApp && entityDetails.activeApp.appName;\n    const firstApp = entityDetails && entityDetails.activeApps && entityDetails.activeApps[0];\n    return {\n        entity: entityDetails && entityDetails.entity,\n        currentApp: activeApp || (firstApp && firstApp.name)\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        clearNotifications: () => dispatch(actions.clearNotifications())\n    };\n}\n\nexport default routerParams(connect(mapStateToProps, mapDispatchToProps)(Inventory));\n"],"sourceRoot":""}