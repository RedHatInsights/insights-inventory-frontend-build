{"version":3,"file":"js/7891.1b2996db74db2bc5d640.js","mappings":"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","sources":["webpack:///./src/components/InventoryTabs/HybridInventoryTabs.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Main/Main.js","webpack:///./src/routes/InventoryTable.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { useLocation } from 'react-router-dom';\nimport { Tab, TabTitleText, Tabs } from '@patternfly/react-core';\nimport useFeatureFlag from '../../Utilities/useFeatureFlag';\nimport {\n  INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS,\n  INVENTORY_TOTAL_FETCH_EDGE_PARAMS,\n  INVENTORY_TOTAL_FETCH_URL_SERVER,\n  hybridInventoryTabKeys,\n} from '../../Utilities/constants';\nimport { useNavigate } from 'react-router-dom';\n\nconst HybridInventoryTabs = ({\n  ConventionalSystemsTab,\n  ImmutableDevicesTab,\n  tabPathname,\n  isImmutableTabOpen,\n}) => {\n  const { search } = useLocation();\n  //used to hold URL params across tab changes\n  const prevSearchRef = useRef('');\n  const navigate = useNavigate();\n  const [hasEdgeImages, setHasEdgeImages] = useState(false);\n  const EdgeParityEnabled = useFeatureFlag('edgeParity.inventory-list');\n  useEffect(() => {\n    if (EdgeParityEnabled) {\n      try {\n        axios\n          .get(\n            `${INVENTORY_TOTAL_FETCH_URL_SERVER}${INVENTORY_TOTAL_FETCH_EDGE_PARAMS}`\n          )\n          .then((result) => {\n            const accountHasEdgeImages = result?.data?.total > 0;\n            setHasEdgeImages(accountHasEdgeImages);\n            axios\n              .get(\n                `${INVENTORY_TOTAL_FETCH_URL_SERVER}${INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS}`\n              )\n              .then((conventionalImages) => {\n                const accountHasConventionalImages =\n                  conventionalImages?.data?.total > 0;\n\n                if (accountHasEdgeImages && !accountHasConventionalImages) {\n                  handleTabClick(\n                    undefined,\n                    hybridInventoryTabKeys.immutable.key\n                  );\n                }\n              });\n          });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }, [EdgeParityEnabled]);\n\n  const activeTab = isImmutableTabOpen\n    ? hybridInventoryTabKeys.immutable.key\n    : hybridInventoryTabKeys.conventional.key;\n\n  const handleTabClick = (_event, tabIndex) => {\n    const pathWithParams =\n      tabPathname +\n      hybridInventoryTabKeys[tabIndex].url +\n      (prevSearchRef.current || '');\n\n    if (tabIndex !== activeTab) {\n      prevSearchRef.current = search.toString();\n      navigate(pathWithParams, {\n        replace: true,\n      });\n    }\n  };\n\n  return EdgeParityEnabled && hasEdgeImages ? (\n    <Tabs\n      className=\"pf-m-light pf-c-table\"\n      activeKey={activeTab}\n      onSelect={handleTabClick}\n      aria-label=\"Hybrid inventory tabs\"\n      mountOnEnter\n      unmountOnExit\n    >\n      <Tab\n        aria-label=\"Conventional tab\"\n        eventKey={hybridInventoryTabKeys.conventional.key}\n        title={<TabTitleText>Conventional (RPM-DNF)</TabTitleText>}\n      >\n        {ConventionalSystemsTab}\n      </Tab>\n      <Tab\n        aria-label=\"Immutable tab\"\n        eventKey={hybridInventoryTabKeys.immutable.key}\n        title={<TabTitleText>Immutable (OSTree)</TabTitleText>}\n      >\n        {ImmutableDevicesTab}\n      </Tab>\n    </Tabs>\n  ) : (\n    ConventionalSystemsTab\n  );\n};\n\nHybridInventoryTabs.propTypes = {\n  ConventionalSystemsTab: PropTypes.element.isRequired,\n  ImmutableDevicesTab: PropTypes.element.isRequired,\n  isImmutableTabOpen: PropTypes.bool,\n  tabPathname: PropTypes.string,\n};\n\nHybridInventoryTabs.defaultProps = {\n  tabPathname: '/insights/inventory',\n};\nexport default HybridInventoryTabs;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport classNames from 'classnames';\nimport '../Main/main.css';\nexport var Main = function (_a) {\n    var children = _a.children, className = _a.className, props = __rest(_a, [\"children\", \"className\"]);\n    useEffect(function () {\n        console.error(\"Using deprecated \\\"Main\\\" component. Do not use it. Either remove it from your JSX or replace it by \\\"section\\\" HTML element.\");\n    }, []);\n    return (_jsx(\"section\", __assign({}, props, { className: \"\".concat(classNames(className, 'pf-l-page__main-section pf-c-page__main-section')) }, { children: children })));\n};\nexport var InternalMain = Main;\nexport default Main;\n//# sourceMappingURL=Main.js.map","import React, { Suspense, lazy, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport './inventory.scss';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport HybridInventoryTabs from '../components/InventoryTabs/HybridInventoryTabs';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport { useLocation } from 'react-router-dom';\nimport { getSearchParams } from '../constants';\nconst ConventionalSystemsTab = lazy(() =>\n  import(\n    '../components/InventoryTabs/ConventionalSystems/ConventionalSystemsTab'\n  )\n);\nconst ImmutableDevicesTab = lazy(() =>\n  import('../components/InventoryTabs/ImmutableDevices/EdgeDevicesTab')\n);\n\nconst SuspenseWrapper = ({ children }) => (\n  <Suspense\n    fallback={\n      <Bullseye>\n        <Spinner size=\"xl\" />\n      </Bullseye>\n    }\n  >\n    {children}\n  </Suspense>\n);\nconst Inventory = (props) => {\n  const { search } = useLocation();\n  const searchParams = useMemo(() => getSearchParams(), [search.toString()]);\n  const fullProps = { ...props, ...searchParams };\n  return (\n    <React.Fragment>\n      <PageHeader className=\"pf-m-light\">\n        <PageHeaderTitle title=\"Systems\" />\n      </PageHeader>\n      <Main>\n        <HybridInventoryTabs\n          ConventionalSystemsTab={\n            <SuspenseWrapper>\n              <ConventionalSystemsTab {...fullProps} />\n            </SuspenseWrapper>\n          }\n          ImmutableDevicesTab={\n            <SuspenseWrapper>\n              <ImmutableDevicesTab {...fullProps} />\n            </SuspenseWrapper>\n          }\n          isImmutableTabOpen={props.isImmutableTabOpen}\n        />\n      </Main>\n    </React.Fragment>\n  );\n};\n\nInventory.defaultProps = {\n  initialLoading: true,\n  notificationProp: PropTypes.object,\n};\nInventory.propTypes = {\n  isImmutableTabOpen: PropTypes.bool,\n};\nSuspenseWrapper.propTypes = {\n  children: PropTypes.element,\n};\nexport default Inventory;\n"],"names":["HybridInventoryTabs","ConventionalSystemsTab","ImmutableDevicesTab","tabPathname","isImmutableTabOpen","search","useLocation","prevSearchRef","useRef","navigate","useNavigate","useState","hasEdgeImages","setHasEdgeImages","EdgeParityEnabled","useFeatureFlag","useEffect","axios","INVENTORY_TOTAL_FETCH_URL_SERVER","INVENTORY_TOTAL_FETCH_EDGE_PARAMS","then","result","accountHasEdgeImages","data","total","INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS","conventionalImages","accountHasConventionalImages","handleTabClick","undefined","hybridInventoryTabKeys","immutable","key","e","console","log","activeTab","conventional","_event","tabIndex","pathWithParams","url","current","toString","replace","className","activeKey","onSelect","mountOnEnter","unmountOnExit","eventKey","title","T","propTypes","PropTypes","isRequired","defaultProps","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","_a","children","props","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","error","concat","lazy","SuspenseWrapper","Suspense","fallback","Bullseye","Spinner","size","Inventory","searchParams","useMemo","getSearchParams","fullProps","PageHeader","PageHeaderTitle","initialLoading","notificationProp"],"sourceRoot":""}