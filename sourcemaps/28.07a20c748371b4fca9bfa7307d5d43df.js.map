{"version":3,"file":"js/28.898f20fd703cd3fc0f71.js","mappings":"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","sources":["webpack:///./src/routes/InventoryDetail.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector, shallowEqual, useStore } from 'react-redux';\nimport { useRouteMatch } from 'react-router-dom';\nimport './inventory.scss';\nimport { Link, useHistory } from 'react-router-dom';\nimport { entitesDetailReducer, RegistryContext } from '../store';\nimport * as actions from '../store/actions';\nimport { Grid, GridItem } from '@patternfly/react-core';\nimport { Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { Skeleton, SkeletonSize, PageHeader, Main } from '@redhat-cloud-services/frontend-components';\nimport classnames from 'classnames';\nimport { routes } from '../Routes';\nimport InventoryDetailHead from '../modules/InventoryDetailHead';\nimport AppInfo from '../modules/AppInfo';\nimport DetailWrapper from '../modules/DetailWrapper';\n\nconst Inventory = ({ entity, currentApp, clearNotifications }) => {\n    const store = useStore();\n    const history = useHistory();\n    const { params: { inventoryId } } = useRouteMatch('/:inventoryId');\n    const { getRegistry } = useContext(RegistryContext);\n    const { loading, writePermissions } = useSelector(\n        ({ permissionsReducer }) =>\n            ({ loading: permissionsReducer?.loading, writePermissions: permissionsReducer?.writePermissions }),\n        shallowEqual\n    );\n    const entityLoaded = useSelector(({ entityDetails }) => entityDetails?.loaded);\n\n    useEffect(() => {\n        insights.chrome?.hideGlobalFilter?.(true);\n        insights.chrome.appAction('system-detail');\n        clearNotifications();\n\n        // BZ: RHEL cockpit is linking to crc/insights/inventory/{}/insights\n        // which results in a page error, catch that and redirect\n        // TODO Remove me when BZ is fixed\n        const splitUrl = window.location.href.split('/insights');\n        if (splitUrl.length === 3) {\n            window.location = `${splitUrl[0]}/insights${splitUrl[1]}`;\n        }\n    }, []);\n\n    const additionalClasses = {\n        'ins-c-inventory__detail--general-info': currentApp && currentApp === 'general_information'\n    };\n\n    if (entity) {\n        document.title = `${entity.display_name} | Inventory | Red Hat Insights`;\n    }\n\n    useEffect(() => {\n        insights?.chrome?.appObjectId?.(entity?.id);\n    }, [entity?.id]);\n\n    return (\n        <DetailWrapper\n            hideInvLink\n            showTags\n            store={store}\n            history={history}\n            onLoad={({ mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                getRegistry().register(mergeWithDetail(entitesDetailReducer(INVENTORY_ACTION_TYPES)));\n            }}\n        >\n            <PageHeader className={classnames('pf-m-light ins-inventory-detail', additionalClasses)} >\n                <Breadcrumb ouiaId=\"systems-list\">\n                    <BreadcrumbItem>\n                        <Link to={routes.table}>Inventory</Link>\n                    </BreadcrumbItem>\n                    <BreadcrumbItem isActive>\n                        <div className=\"ins-c-inventory__detail--breadcrumb-name\">\n                            {\n                                entity ?\n                                    entity.display_name :\n                                    entityLoaded !== true ?\n                                        <Skeleton size={SkeletonSize.xs} /> : inventoryId\n                            }\n                        </div>\n                    </BreadcrumbItem>\n                </Breadcrumb>\n                {\n                    !loading && <InventoryDetailHead\n                        store={store}\n                        history={history}\n                        fallback=\"\"\n                        hideBack\n                        showTags\n                        hideInvLink\n                        showDelete={writePermissions}\n                        hideInvDrawer\n                    />\n                }\n            </PageHeader>\n            <Main className={classnames(additionalClasses)}>\n                <Grid gutter=\"md\">\n                    <GridItem span={12}>\n                        <AppInfo\n                            showTags\n                            fallback=\"\"\n                            store={store}\n                            history={history}\n                        />\n                    </GridItem>\n                </Grid>\n            </Main>\n        </DetailWrapper>\n    );\n};\n\nInventory.contextTypes = {\n    store: PropTypes.object\n};\n\nInventory.propTypes = {\n    history: PropTypes.object,\n    entity: PropTypes.object,\n    loadEntity: PropTypes.func,\n    clearNotifications: PropTypes.func,\n    currentApp: PropTypes.string\n};\n\nfunction mapStateToProps({ entityDetails }) {\n    const activeApp = entityDetails && entityDetails.activeApp && entityDetails.activeApp.appName;\n    const firstApp = entityDetails && entityDetails.activeApps && entityDetails.activeApps[0];\n    return {\n        entity: entityDetails && entityDetails.entity,\n        currentApp: activeApp || (firstApp && firstApp.name)\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        clearNotifications: () => dispatch(actions.clearNotifications())\n    };\n}\n\nexport default routerParams(connect(mapStateToProps, mapDispatchToProps)(Inventory));\n"],"names":["Inventory","entity","currentApp","clearNotifications","store","useStore","history","useHistory","inventoryId","useRouteMatch","params","getRegistry","useContext","RegistryContext","useSelector","permissionsReducer","loading","writePermissions","shallowEqual","entityLoaded","entityDetails","loaded","useEffect","insights","chrome","hideGlobalFilter","appAction","splitUrl","window","location","href","split","length","additionalClasses","document","title","display_name","appObjectId","id","hideInvLink","showTags","onLoad","mergeWithDetail","INVENTORY_ACTION_TYPES","register","entitesDetailReducer","className","classnames","ouiaId","Link","to","routes","isActive","size","SkeletonSize","fallback","hideBack","showDelete","hideInvDrawer","gutter","span","contextTypes","PropTypes","propTypes","loadEntity","routerParams","connect","activeApp","appName","firstApp","activeApps","name","dispatch","actions"],"sourceRoot":""}