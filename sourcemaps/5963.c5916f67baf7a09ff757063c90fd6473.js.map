{"version":3,"file":"js/5963.1658427145760.e180766c229d26d0c13e.js","mappings":"kQASA,QALI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAASA,KAAK,S,gNCGhBC,EAAiB,SAAC,GAA8B,IAA5BC,EAA4B,EAA5BA,YAAgBC,GAAY,YAClD,GAA8BC,EAAAA,EAAAA,YAA9B,eAAOC,EAAP,KAAgBC,EAAhB,KAQA,OAPAC,EAAAA,EAAAA,YAAU,WACW,QAAbL,IACW,QAAX,EAAAA,WAAA,mBAAeM,gBAAf,gBAA0B,CAAEC,mBAAAA,EAAAA,MAGhCH,GAAW,kBAAMJ,EAAcQ,EAAAA,SAAWC,EAAAA,cAC3C,IACIN,EAAU,kBAACA,EACVH,GAAe,CACfU,MAAOV,IAAcW,YAGzB,kBAAC,IAAuBV,IACfW,EAAAA,GAGjBb,EAAec,UAAY,CACvBb,YAAac,IAAAA,MAGjB,W,upBC3BO,IAEMC,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAGxDC,EAAc,SAACC,GACxB,GAAc,IAAVA,GAAeC,MAAMC,OAAOF,IAC5B,MAAO,MAGX,IAAMG,EAAQC,KAAKC,MAAMD,KAAKE,IAAIN,GAASI,KAAKE,IAAI,OACpD,gBAAUC,YAAYP,EAAQI,KAAKI,IAAI,KAAML,IAAQM,QAAQ,IAA7D,YAAoEX,EAAMK,KAkD9E,SAAeO,EAAAA,EAAAA,KAAgB,eAEtBC,EAAAA,GAAAA,+BArBF,SAAyBC,EAAzB,GAA0D,IAR7BC,EAXLC,EAmBqBC,EAAa,EAAxBC,QAAWD,QAC1CE,EAAiBF,GAAWA,EAAQ,IAAMA,EAAQ,GAAGG,gBAAmB,GACxEC,EAAoBJ,GAAWA,EAAQ,SAA2D,IAA7CA,EAAQ,GAAGG,eAAeE,gBAC9DL,EAAQ,GAAGG,eAAeE,eACjD,cACOR,GADP,IAEIS,cAAc,OACe,QAArBF,GAAmD,UAArBA,EAAgC,GAAK,CAAC,QAE5EF,cAAe,EAAF,GACTK,QAAQ,GACLL,GAFM,IAGTM,QAASN,EAAcO,qBAAuBzB,EAAYkB,EAAcO,qBACxEC,cAhCmBX,EAgCUG,EAAcS,UA/B5CZ,GAASA,EAAMa,QAAO,SAACC,EAAKC,GAAN,cACtBD,GACAC,EAAKC,QAAU,CACdA,QAAS,GAAF,eAAMF,EAAIE,SAAV,CAAmBD,KAC1B,CACAE,SAAU,GAAF,eAAMH,EAAIG,UAAV,CAAoBF,QAEhC,CAAEC,QAAS,GAAIC,SAAU,MAyBrBC,SAtBwBnB,EAsBKI,EAAcgB,mBArB5CpB,GAAcA,EAAWc,QAAO,SAACC,EAAKC,GAAN,MAAgB,CACnDhB,WAAY,GAAF,eAAMe,EAAIf,YAAV,CAAsBgB,IAChCK,KAAM,kBAAIN,EAAIM,OAAR,OAAiBL,EAAKM,gBAAkB,KAAIC,OAAOC,SACzDC,KAAM,kBAAIV,EAAIU,OAAR,OAAiBT,EAAKU,gBAAkB,KAAIH,OAAOC,YACzD,CAAExB,WAAY,GAAIqB,KAAM,GAAII,KAAM,cAsBX,SAGtB3B,EAAAA,GAAAA,6BAlDF,SAA8BC,GACjC,cACOA,GADP,IAEIK,cAAe,CACXK,QAAQ,QA2CW,GAK3B,CACIL,cAnEoB,CAAEK,QAAQ","sources":["webpack:///./src/components/SpinnerFallback.js","webpack:///./src/components/SystemDetails/GeneralInfo.js","webpack:///./src/store/systemProfileStore.js"],"sourcesContent":["import React from 'react';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\n\nconst fallback = (\n    <Bullseye>\n        <Spinner size=\"xl\" />\n    </Bullseye>\n);\n\nexport default fallback;\n","import React, { useEffect, useState, Fragment } from 'react';\nimport { Provider } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport GeneralInformation from '../GeneralInfo/GeneralInformation';\nexport { default as TextInputModal } from '../GeneralInfo/TextInputModal';\nimport fallback from '../SpinnerFallback';\nimport systemProfileStore from '../../store/systemProfileStore';\n\nconst GeneralInfoTab = ({ getRegistry, ...props }) => {\n    const [Wrapper, setWrapper] = useState();\n    useEffect(() => {\n        if (getRegistry) {\n            getRegistry()?.register?.({ systemProfileStore });\n        }\n\n        setWrapper(() => getRegistry ? Provider : Fragment);\n    }, []);\n    return Wrapper ? <Wrapper\n        {...getRegistry && {\n            store: getRegistry().getStore()\n        }}\n    >\n        <GeneralInformation {...props} />\n    </Wrapper> : fallback;\n};\n\nGeneralInfoTab.propTypes = {\n    getRegistry: PropTypes.func\n};\n\nexport default GeneralInfoTab;\n","import { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport { ACTION_TYPES } from './action-types';\n\nexport const defaultState = { loaded: false };\n\nexport const sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n// Kudos to https://stackoverflow.com/a/18650828/2560321\nexport const formatBytes = (bytes) => {\n    if (bytes === 0 || isNaN(Number(bytes))) {\n        return '0 B';\n    }\n\n    const index = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${parseFloat((bytes / Math.pow(1024, index)).toFixed(2))} ${sizes[index]}`;\n};\n\nexport function systemProfilePending(state) {\n    return {\n        ...state,\n        systemProfile: {\n            loaded: false\n        }\n    };\n}\n\nexport function calculateRepos(repos) {\n    return repos && repos.reduce((acc, curr) => ({\n        ...acc,\n        ...curr.enabled ? {\n            enabled: [...acc.enabled, curr]\n        } : {\n            disabled: [...acc.disabled, curr]\n        }\n    }), { enabled: [], disabled: [] });\n}\n\nexport function calculateInterfaces(interfaces) {\n    return interfaces && interfaces.reduce((acc, curr) => ({\n        interfaces: [...acc.interfaces, curr],\n        ipv4: [...acc.ipv4, ...curr.ipv4_addresses || []].filter(Boolean),\n        ipv6: [...acc.ipv6, ...curr.ipv6_addresses || []].filter(Boolean)\n    }), { interfaces: [], ipv4: [], ipv6: [] });\n}\n\nexport function onSystemProfile(state, { payload: { results } }) {\n    const systemProfile = (results && results[0] && results[0].system_profile) || {};\n    const cloudProviderObj = (results && results[0] && (typeof results[0].system_profile.cloud_provider !== 'undefined'))\n                        && results[0].system_profile.cloud_provider;\n    return {\n        ...state,\n        disabledApps: [\n            ...(cloudProviderObj === 'aws' || cloudProviderObj === 'azure') ? [] : ['ros']\n        ],\n        systemProfile: {\n            loaded: true,\n            ...systemProfile,\n            ramSize: systemProfile.system_memory_bytes && formatBytes(systemProfile.system_memory_bytes),\n            repositories: calculateRepos(systemProfile.yum_repos),\n            network: calculateInterfaces(systemProfile.network_interfaces)\n        }\n    };\n}\n\nexport default applyReducerHash(\n    {\n        [ACTION_TYPES.LOAD_SYSTEM_PROFILE_FULFILLED]: onSystemProfile,\n        [ACTION_TYPES.LOAD_SYSTEM_PROFILE_PENDING]: systemProfilePending\n    },\n    {\n        systemProfile: defaultState\n    }\n);\n"],"names":["size","GeneralInfoTab","getRegistry","props","useState","Wrapper","setWrapper","useEffect","register","systemProfileStore","Provider","Fragment","store","getStore","fallback","propTypes","PropTypes","sizes","formatBytes","bytes","isNaN","Number","index","Math","floor","log","parseFloat","pow","toFixed","applyReducerHash","ACTION_TYPES","state","interfaces","repos","results","payload","systemProfile","system_profile","cloudProviderObj","cloud_provider","disabledApps","loaded","ramSize","system_memory_bytes","repositories","yum_repos","reduce","acc","curr","enabled","disabled","network","network_interfaces","ipv4","ipv4_addresses","filter","Boolean","ipv6","ipv6_addresses"],"sourceRoot":""}