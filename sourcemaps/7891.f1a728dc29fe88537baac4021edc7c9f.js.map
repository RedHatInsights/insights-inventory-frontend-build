{"version":3,"file":"js/7891.a6f7213d4b8cdc5b5f34.js","mappings":"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","sources":["webpack:///./src/components/InventoryTabs/HybridInventoryTabs.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Main/Main.js","webpack:///./src/routes/InventoryTable.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { useLocation } from 'react-router-dom';\nimport { Tab, TabTitleText, Tabs } from '@patternfly/react-core';\nimport {\n  INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS,\n  INVENTORY_TOTAL_FETCH_EDGE_PARAMS,\n  INVENTORY_TOTAL_FETCH_URL_SERVER,\n  hybridInventoryTabKeys,\n} from '../../Utilities/constants';\nimport { useNavigate } from 'react-router-dom';\n\nconst HybridInventoryTabs = ({\n  ConventionalSystemsTab,\n  ImmutableDevicesTab,\n  tabPathname,\n  isImmutableTabOpen,\n  isEdgeParityEnabled,\n}) => {\n  const { search } = useLocation();\n  //used to hold URL params across tab changes\n  const prevSearchRef = useRef('');\n  const navigate = useNavigate();\n  const [hasEdgeImages, setHasEdgeImages] = useState(false);\n  useEffect(() => {\n    if (isEdgeParityEnabled) {\n      try {\n        axios\n          .get(\n            `${INVENTORY_TOTAL_FETCH_URL_SERVER}${INVENTORY_TOTAL_FETCH_EDGE_PARAMS}`\n          )\n          .then((result) => {\n            const accountHasEdgeImages = result?.data?.total > 0;\n            setHasEdgeImages(accountHasEdgeImages);\n            axios\n              .get(\n                `${INVENTORY_TOTAL_FETCH_URL_SERVER}${INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS}`\n              )\n              .then((conventionalImages) => {\n                const accountHasConventionalImages =\n                  conventionalImages?.data?.total > 0;\n\n                if (accountHasEdgeImages && !accountHasConventionalImages) {\n                  handleTabClick(\n                    undefined,\n                    hybridInventoryTabKeys.immutable.key\n                  );\n                }\n              });\n          });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }, [isEdgeParityEnabled]);\n\n  const activeTab = isImmutableTabOpen\n    ? hybridInventoryTabKeys.immutable.key\n    : hybridInventoryTabKeys.conventional.key;\n\n  const handleTabClick = (_event, tabIndex) => {\n    const pathWithParams =\n      tabPathname +\n      hybridInventoryTabKeys[tabIndex].url +\n      (prevSearchRef.current || '');\n\n    if (tabIndex !== activeTab) {\n      prevSearchRef.current = search.toString();\n      navigate(pathWithParams, {\n        replace: true,\n      });\n    }\n  };\n\n  return isEdgeParityEnabled && hasEdgeImages ? (\n    <Tabs\n      className=\"pf-m-light pf-c-table\"\n      activeKey={activeTab}\n      onSelect={handleTabClick}\n      aria-label=\"Hybrid inventory tabs\"\n      mountOnEnter\n      unmountOnExit\n    >\n      <Tab\n        aria-label=\"Conventional tab\"\n        eventKey={hybridInventoryTabKeys.conventional.key}\n        title={<TabTitleText>Conventional (RPM-DNF)</TabTitleText>}\n      >\n        {ConventionalSystemsTab}\n      </Tab>\n      <Tab\n        aria-label=\"Immutable tab\"\n        eventKey={hybridInventoryTabKeys.immutable.key}\n        title={<TabTitleText>Immutable (OSTree)</TabTitleText>}\n      >\n        {ImmutableDevicesTab}\n      </Tab>\n    </Tabs>\n  ) : (\n    ConventionalSystemsTab\n  );\n};\n\nHybridInventoryTabs.propTypes = {\n  ConventionalSystemsTab: PropTypes.element.isRequired,\n  ImmutableDevicesTab: PropTypes.element.isRequired,\n  isImmutableTabOpen: PropTypes.bool,\n  tabPathname: PropTypes.string,\n  isEdgeParityEnabled: PropTypes.bool,\n};\n\nHybridInventoryTabs.defaultProps = {\n  tabPathname: '/insights/inventory',\n};\nexport default HybridInventoryTabs;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport classNames from 'classnames';\nimport '../Main/main.css';\nexport var Main = function (_a) {\n    var children = _a.children, className = _a.className, props = __rest(_a, [\"children\", \"className\"]);\n    useEffect(function () {\n        console.error(\"Using deprecated \\\"Main\\\" component. Do not use it. Either remove it from your JSX or replace it by \\\"section\\\" HTML element.\");\n    }, []);\n    return (_jsx(\"section\", __assign({}, props, { className: \"\".concat(classNames(className, 'pf-l-page__main-section pf-c-page__main-section')) }, { children: children })));\n};\nexport var InternalMain = Main;\nexport default Main;\n//# sourceMappingURL=Main.js.map","import React, { Suspense, lazy, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport './inventory.scss';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport HybridInventoryTabs from '../components/InventoryTabs/HybridInventoryTabs';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport { useLocation } from 'react-router-dom';\nimport { getSearchParams } from '../constants';\nimport useFeatureFlag from '../Utilities/useFeatureFlag';\nconst ConventionalSystemsTab = lazy(() =>\n  import(\n    '../components/InventoryTabs/ConventionalSystems/ConventionalSystemsTab'\n  )\n);\nconst ImmutableDevicesTab = lazy(() =>\n  import('../components/InventoryTabs/ImmutableDevices/EdgeDevicesTab')\n);\n\nconst SuspenseWrapper = ({ children }) => (\n  <Suspense\n    fallback={\n      <Bullseye>\n        <Spinner size=\"xl\" />\n      </Bullseye>\n    }\n  >\n    {children}\n  </Suspense>\n);\nconst Inventory = (props) => {\n  const { search } = useLocation();\n  const searchParams = useMemo(() => getSearchParams(), [search.toString()]);\n  const fullProps = { ...props, ...searchParams };\n  const isEdgeParityEnabled = useFeatureFlag('edgeParity.inventory-list');\n  return (\n    <React.Fragment>\n      <PageHeader className=\"pf-m-light\">\n        <PageHeaderTitle title=\"Systems\" />\n      </PageHeader>\n      <Main>\n        <HybridInventoryTabs\n          ConventionalSystemsTab={\n            <SuspenseWrapper>\n              <ConventionalSystemsTab {...fullProps} />\n            </SuspenseWrapper>\n          }\n          ImmutableDevicesTab={\n            <SuspenseWrapper>\n              <ImmutableDevicesTab {...fullProps} />\n            </SuspenseWrapper>\n          }\n          isImmutableTabOpen={props.isImmutableTabOpen}\n          isEdgeParityEnabled={isEdgeParityEnabled}\n        />\n      </Main>\n    </React.Fragment>\n  );\n};\n\nInventory.defaultProps = {\n  initialLoading: true,\n  notificationProp: PropTypes.object,\n};\nInventory.propTypes = {\n  isImmutableTabOpen: PropTypes.bool,\n};\nSuspenseWrapper.propTypes = {\n  children: PropTypes.element,\n};\nexport default Inventory;\n"],"names":["HybridInventoryTabs","_ref","ConventionalSystemsTab","ImmutableDevicesTab","tabPathname","isImmutableTabOpen","isEdgeParityEnabled","search","useLocation","prevSearchRef","useRef","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","hasEdgeImages","setHasEdgeImages","useEffect","axios","concat","INVENTORY_TOTAL_FETCH_URL_SERVER","INVENTORY_TOTAL_FETCH_EDGE_PARAMS","then","result","_result$data","accountHasEdgeImages","data","total","INVENTORY_TOTAL_FETCH_CONVENTIONAL_PARAMS","conventionalImages","_conventionalImages$d","accountHasConventionalImages","handleTabClick","undefined","hybridInventoryTabKeys","immutable","key","e","console","log","activeTab","conventional","_event","tabIndex","pathWithParams","url","current","toString","replace","React","Tabs","className","activeKey","onSelect","mountOnEnter","unmountOnExit","Tab","eventKey","title","TabTitleText","propTypes","PropTypes","isRequired","defaultProps","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","_a","children","props","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","error","lazy","SuspenseWrapper","Suspense","fallback","Bullseye","Spinner","size","Inventory","searchParams","useMemo","getSearchParams","fullProps","_objectSpread","useFeatureFlag","PageHeader","PageHeaderTitle","Main","initialLoading","notificationProp"],"sourceRoot":""}