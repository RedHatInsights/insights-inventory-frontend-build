{"version":3,"file":"js/72.3c3bf9941c665d048a91.js","mappings":"sOAMMA,EAAgB,SAAH,OAAMC,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SAAQ,OAC9C,0BACIC,QAAS,SAACC,GAAC,OAAKA,EAAEC,iBAAiB,EACnCC,UAAU,6BACV,mCAA2BJ,EAAQ,gBAEnC,kBAAC,IAAQ,CAACF,MAAOA,EAAOO,WAAa,kBAAMN,EAASC,EAAUF,EAAM,IACjE,EAGXD,EAAcS,UAAY,CACtBR,MAAOS,IAAAA,OACPR,SAAUQ,IAAAA,KACVP,SAAUO,IAAAA,QAYd,SAAeC,EAAAA,EAAAA,UAAQ,iBAAO,CAAC,CAAC,IATR,SAACC,GAAQ,MAAM,CACnCV,SAAU,SAACC,EAAUF,GACbE,IACAS,GAASC,EAAAA,EAAAA,KAAe,IACxBD,GAASV,EAAAA,EAAAA,IAASC,OAAUW,OAAWA,EAAWb,IAE1D,EACH,GAED,CAAoDD,E,gqBC7B7C,IAAMe,EAAgB,SAACC,GAAkC,IAAtBC,EAAO,UAAH,6CAAG,IAAIC,KAGjD,OAFAD,EAAKE,QAAQF,EAAKG,UAAyB,EAAbJ,GAEvBC,CACX,EAEaI,EAA2B,SAACC,GACrC,IAAMC,EAAgB,IAAIL,KAAKI,EAAkBE,iBAC3CC,EAAkB,IAAIP,KAEtBQ,EAAiBX,EAAc,GAC/BY,EAAiBZ,EAAc,GAErC,OAAIQ,EAAgBE,EACT,QACAE,EAAiBJ,GAAiBA,EAAgBE,EAClD,QAEFC,EAAiBH,GAAiBA,EAAgBI,EAChD,gBAEA,QAEf,EAEaC,EAA6B,SAACC,GAEvC,SAAKA,GAGIA,EAAqBC,QACuC,WAA1DT,EAAyBQ,EAAqBC,QAI7D,EAEaC,EAAc,SAACC,EAASC,EAAUC,GAAgB,sBACrDC,GAAeH,SAAc,QAAP,EAAPA,EAASI,aAAK,WAAP,EAAP,EAAgBC,QAASL,EAAQM,SAAWN,SAAc,QAAP,EAAPA,EAASI,aAAK,WAAP,EAAP,EAAgBG,QAC5EP,aAAO,EAAPA,EAASQ,MAAO,GAAKR,EAAQM,UAAUN,aAAO,EAAPA,EAASQ,MAAOR,EAAQM,UAChEN,aAAO,EAAPA,EAASI,MAEPK,EAAS,EAAH,OACLT,EAAQU,UAAY,CACnBC,OAAQX,SAAe,QAAR,EAAPA,EAASW,cAAM,WAAR,EAAP,EAAiBC,IACzBC,eAAgBb,SAAe,QAAR,EAAPA,EAASW,cAAM,OAAW,QAAX,EAAf,EAAiBG,iBAAS,WAAnB,EAAP,EAA4BC,gBAE7Cf,GAAO,IACVgB,SAAShB,aAAO,EAAPA,EAASgB,WAAWhB,aAAO,EAAPA,EAASiB,eACtCC,SAASlB,aAAO,EAAPA,EAASkB,WAAWlB,SAAe,QAAR,EAAPA,EAASW,cAAM,WAAR,EAAP,EAAiBC,KAC9CC,gBAAgBb,SAAuB,QAAhB,EAAPA,EAASa,sBAAc,WAAhB,EAAP,EAAyBE,iBAAiBf,SAAe,QAAR,EAAPA,EAASW,cAAM,OAAW,QAAX,EAAf,EAAiBG,iBAAS,WAAnB,EAAP,EAA4BC,iBACnFZ,aAAY,EAAZA,EAAcE,QAAS,GAAK,CAC3Bc,UAAWnB,aAAO,EAAPA,EAASQ,KACpBA,KAAM,IAId,OAAOY,EAAAA,EAAAA,IAAajB,EAAcM,EAAQ,CAAER,SAAAA,GAAYC,EAC5D,C","sources":["webpack:///./src/Utilities/TagWithDialog.js","webpack:///./src/Utilities/sharedFunctions.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { TagCount } from '@redhat-cloud-services/frontend-components/TagCount';\nimport { loadTags, toggleTagModal } from '../store/actions';\n\nconst TagWithDialog = ({ count, loadTags, systemId }) => (\n    <span\n        onClick={(e) => e.stopPropagation()}\n        className=\"ins-c-inventory__list-tags\"\n        data-ouia-component-id={`${systemId}-tag-button`}\n    >\n        <TagCount count={count} onTagClick={ () => loadTags(systemId, count) } />\n    </span>\n);\n\nTagWithDialog.propTypes = {\n    count: PropTypes.number,\n    loadTags: PropTypes.func,\n    systemId: PropTypes.string\n};\n\nconst dispatchToProps = (dispatch) => ({\n    loadTags: (systemId, count) => {\n        if (systemId) {\n            dispatch(toggleTagModal(true));\n            dispatch(loadTags(systemId, undefined, undefined, count));\n        }\n    }\n});\n\nexport default connect(() => ({}), dispatchToProps)(TagWithDialog);\n","import { loadEntities } from '../store/inventory-actions';\n\nexport const subtractWeeks = (numOfWeeks, date = new Date()) => {\n    date.setDate(date.getDate() - numOfWeeks * 7);\n\n    return date;\n};\n\nexport const verifyCollectorStaleness = (reporterStaleness) =>{\n    const stalenessDate = new Date(reporterStaleness.stale_timestamp);\n    const currentDateTime = new Date();\n\n    const twoWeeksPeriod = subtractWeeks(2);\n    const oneWeeksPeriod = subtractWeeks(1);\n\n    if (stalenessDate > currentDateTime) {\n        return 'Fresh';\n    } else if (oneWeeksPeriod < stalenessDate && stalenessDate < currentDateTime) {\n        return 'Stale';\n    }\n    else if (twoWeeksPeriod < stalenessDate && stalenessDate < oneWeeksPeriod) {\n        return 'Stale warning';\n    } else {\n        return 'Culled';\n    }\n};\n\nexport const verifyCulledInsightsClient = (perReporterStaleness) => {\n    //TODO: get rid of !perReporterStaleness condition when dependant apps have per_reporter_staleness info\n    if (!perReporterStaleness) {\n        return false;\n    }\n    else if (perReporterStaleness.puptoo) {\n        return verifyCollectorStaleness(perReporterStaleness.puptoo) === 'Culled';\n    } else {\n        return true;\n    }\n};\n\nexport const loadSystems = (options, showTags, getEntities) => {\n    const limitedItems = options?.items?.length > options.per_page ? options?.items?.slice(\n        (options?.page - 1) * options.per_page, options?.page * options.per_page\n    ) : options?.items;\n\n    const config = {\n        ...options.hasItems && {\n            sortBy: options?.sortBy?.key,\n            orderDirection: options?.sortBy?.direction?.toUpperCase()\n        },\n        ...options,\n        filters: options?.filters || options?.activeFilters,\n        orderBy: options?.orderBy || options?.sortBy?.key,\n        orderDirection: options?.orderDirection?.toUpperCase() || options?.sortBy?.direction?.toUpperCase(),\n        ...limitedItems?.length > 0 && {\n            itemsPage: options?.page,\n            page: 1\n        }\n    };\n\n    return loadEntities(limitedItems, config, { showTags }, getEntities);\n};\n"],"names":["TagWithDialog","count","loadTags","systemId","onClick","e","stopPropagation","className","onTagClick","propTypes","PropTypes","connect","dispatch","toggleTagModal","undefined","subtractWeeks","numOfWeeks","date","Date","setDate","getDate","verifyCollectorStaleness","reporterStaleness","stalenessDate","stale_timestamp","currentDateTime","twoWeeksPeriod","oneWeeksPeriod","verifyCulledInsightsClient","perReporterStaleness","puptoo","loadSystems","options","showTags","getEntities","limitedItems","items","length","per_page","slice","page","config","hasItems","sortBy","key","orderDirection","direction","toUpperCase","filters","activeFilters","orderBy","itemsPage","loadEntities"],"sourceRoot":""}